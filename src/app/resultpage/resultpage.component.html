<!-- Loader -->
<div class="loader-container" *ngIf="loader">
  <div class="loader">
    <div class="spinner"></div>
    <p>Processing your booking...</p>
  </div>
</div>

<!-- Success Content -->
<div class="result-wrapper" *ngIf="showSuccess && !loader">
  
  <!-- Header Section -->
  <div class="result-header">
    <div class="container">
      <div class="success-badge">
        <i class="fas fa-check-circle"></i>
      </div>
      <h1 class="success-title">Booking Confirmed Successfully!</h1>
      <p class="success-subtitle">Your ticket has been generated and confirmed</p>
    </div>
  </div>

  <!-- Main Content Section -->
  <div class="result-content">
    <div class="container">
      
      <!-- PNR Card -->
      <div class="info-card pnr-card">
        <div class="card-header">
          <i class="fas fa-ticket-alt"></i>
          <h3>Booking Reference</h3>
        </div>
        <div class="pnr-display">
          <span class="pnr-label">PNR / Order ID</span>
          <span class="pnr-number">{{ orderId }}</span>
        </div>
      </div>

      <!-- QR Code Card -->
      <div class="info-card qr-card-centered" *ngIf="qr">
        <div class="card-header">
          <i class="fas fa-qrcode"></i>
          <h3>Boarding QR Code</h3>
        </div>
        <div class="qr-content">
          <div class="qr-box">
            <img [src]="qr" alt="Booking QR Code" class="qr-image" />
          </div>
          <p class="qr-instruction">
            <i class="fas fa-info-circle"></i>
            Show this QR code to the driver at the time of boarding
          </p>
        </div>
      </div>

      <!-- Journey Details Card -->
      <div class="info-card journey-card">
        <div class="card-header">
          <i class="fas fa-route"></i>
          <h3>Journey Details</h3>
        </div>
        <div class="journey-info">
          <div class="journey-row">
            <div class="journey-point">
              <div class="point-icon from-icon">
                <i class="fas fa-circle"></i>
              </div>
              <div class="point-details">
                <span class="point-label">From</span>
                <span class="point-value">{{ list?.source || list?.SOURCE || 'N/A' }}</span>
              </div>
            </div>
            
            <div class="journey-arrow">
              <i class="fas fa-arrow-right"></i>
            </div>
            
            <div class="journey-point">
              <div class="point-icon to-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <div class="point-details">
                <span class="point-label">To</span>
                <span class="point-value">{{ list?.destination || list?.DESTINATION || 'N/A' }}</span>
              </div>
            </div>
          </div>
          
          <!-- Pickup & Drop Locations -->
          <div class="location-section" *ngIf="list?.pickup || list?.drop || list?.PICKUPLOCATION || list?.DROPLOCATION">
            <div class="location-item" *ngIf="list?.pickup || list?.PICKUPLOCATION">
              <div class="location-icon pickup-icon">
                <i class="fas fa-map-pin"></i>
              </div>
              <div class="location-info">
                <span class="location-label">Pickup Location</span>
                <span class="location-address">{{ list?.pickup || list?.PICKUPLOCATION || 'N/A' }}</span>
              </div>
            </div>
            
            <div class="location-item" *ngIf="list?.drop || list?.DROPLOCATION">
              <div class="location-icon drop-icon">
                <i class="fas fa-map-pin"></i>
              </div>
              <div class="location-info">
                <span class="location-label">Drop Location</span>
                <span class="location-address">{{ list?.drop || list?.DROPLOCATION || 'N/A' }}</span>
              </div>
            </div>
          </div>

          <!-- Departure Time -->
          <div class="departure-time-section" *ngIf="list?.CARSCHEDULETIME || list?.PICKUPTIME">
            <div class="departure-time-card">
              <i class="fas fa-clock"></i>
              <div>
                <span class="time-label">Departure Time</span>
                <span class="time-value">{{ formatDepartureTime(list?.CARSCHEDULETIME || list?.PICKUPTIME) }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Payment Details Card -->
      <div class="info-card payment-card">
        <div class="card-header">
          <i class="fas fa-receipt"></i>
          <h3>Fare Details</h3>
        </div>
        <div class="payment-details">
          <div class="payment-row total-row" *ngIf="orderAmount">
            <span class="payment-label">Total Fare (in Rs.)</span>
            <span class="payment-amount">â‚¹{{ orderAmount }}</span>
          </div>

          <div class="payment-row">
            <span class="payment-label">Booking Status</span>
            <span class="status-badge status-success">
              <i class="fas fa-check-circle"></i>
              {{ list?.STATUS || 'Confirmed' }}
            </span>
          </div>

          <div class="payment-row" *ngIf="list?.PAYMENTMODE">
            <span class="payment-label">Payment Mode</span>
            <span class="payment-value">{{ list.PAYMENTMODE }}</span>
          </div>
        </div>
      </div>

      <!-- Legal Section -->
      <div class="info-card legal-card">
        <div class="legal-content">
          <p class="legal-text">
            This booking is subject to our 
            <a href="https://wizzride.com/cancellationpolicy/termsandconditions" target="_blank">Terms & Conditions</a>, 
            <a href="https://wizzride.com/cancellationpolicy/termsandconditions" target="_blank">Privacy Policy</a>, and 
            <a href="https://wizzride.com/cancellationpolicy" target="_blank">Cancellation Policy</a>.
          </p>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-section">
        <button class="btn btn-primary" (click)="returnToHome()">
          <i class="fas fa-home"></i>
          Go to Home
        </button>
        <button class="btn btn-secondary" (click)="navigateToContact()">
          <i class="fas fa-phone"></i>
          Contact Us
        </button>
      </div>

    </div>
  </div>

</div>
