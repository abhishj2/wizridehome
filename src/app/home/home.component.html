<div class="phone-modal" *ngIf="showPhonePopup">
    <div class="modal-content">
        <h3>{{ popupTitle || 'Enter your phone number' }}</h3>
        <input type="tel" class="form-input" [(ngModel)]="phoneNumber" placeholder="Enter phone number">
        <div class="actions">
            <button class="search-btn" (click)="confirmPhonePopup()">Submit</button>
            <button class="search-btn" (click)="cancelPhonePopup()">Cancel</button>
        </div>
    </div>
</div>

<!-- Booking Form and Navigation Section -->
<div class="booking-section-wrapper">
    <div class="container header" (click)="onDocumentClick($event)">

        <div class="nav-tabs">
            <button *ngFor="let tab of tabs" class="nav-tab" [class.active]="currentTab === tab"
                (click)="switchTab(tab)">
                <span class="icon" *ngIf="tab === 'shared-cabs'"><img
                        src="../../assets/images/wizsh-Photoroom.png" /></span>
                <span class="icon" *ngIf="tab === 'reserved-cabs'"><img src="../../assets/images/shared.png" /></span>
                <span class="icon" *ngIf="tab === 'flights'"><img
                        src="../../assets/images/WhatsApp Image 2025-09-29 at 11.55.59 AM-Photoroom.png" /></span>
                {{ tab === 'shared-cabs' ? 'Shared Cabs' : tab === 'reserved-cabs' ? 'Reserved Cabs' : 'Flights' }}
            </button>
        </div>

        <div class="tabs-container">
            <ng-container *ngFor="let tab of tabs">
                <div [id]="tab" class="tab-content" [class.active]="currentTab === tab"
                    [class.slide-out-left]="previousTab === tab && isSliding"
                    *ngIf="currentTab === tab || previousTab === tab">
                    <!-- Place the content for each tab here, e.g. use ng-container with ngSwitch or ngIf for each tab -->
                    <ng-container [ngSwitch]="tab">
                        <ng-container *ngSwitchCase="'shared-cabs'">
                            <!-- Shared Cabs tab content -->
                            <div class="booking-form tab-1">
                                <div class="cab-form-row">
                                    <div class="form-group city-select">
                                        <label>From</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-location-dot input-icon"></i>
                                            <input type="text" class="form-input city-input"
                                                [class.error]="isSameCitySelected(formValues.sharedPickup, formValues.sharedDropoff)"
                                                placeholder="Enter pick-up city" [(ngModel)]="formValues.sharedPickup"
                                                (focus)="showCitySuggestionsOnFocus('shared-pickup')"
                                                (input)="showCitySuggestions(formValues.sharedPickup, 'shared-pickup')">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="activeSuggestions['shared-pickup'] && activeSuggestions['shared-pickup'].length > 0">
                                            <ng-container *ngIf="isCityArray(activeSuggestions['shared-pickup'])">
                                                <div *ngFor="let city of activeSuggestions['shared-pickup']"
                                                    class="city-suggestion"
                                                    (click)="selectCity(city.name, city.code, 'shared-pickup')">
                                                    <span class="city-name">{{city.name}}</span>
                                                    <span class="city-code">{{city.code}}</span>
                                                    <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                        {{city.state}}</div>
                                                </div>
                                            </ng-container>
                                        </div>
                                        <div class="validation-error"
                                            *ngIf="isSameCitySelected(formValues.sharedPickup, formValues.sharedDropoff)">
                                            {{getValidationMessage(formValues.sharedPickup, formValues.sharedDropoff)}}
                                        </div>
                                    </div>

                                    <button class="swap-btn" (click)="swapCabLocations('shared')">
                                        <span>‚áÑ</span>
                                    </button>

                                    <div class="form-group city-select">
                                        <label>To</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-location-dot input-icon"></i>
                                            <input type="text" class="form-input city-input"
                                                [class.error]="isSameCitySelected(formValues.sharedPickup, formValues.sharedDropoff)"
                                                placeholder="Enter drop-off city" [(ngModel)]="formValues.sharedDropoff"
                                                (focus)="showCitySuggestionsOnFocus('shared-dropoff')"
                                                (input)="showCitySuggestions(formValues.sharedDropoff, 'shared-dropoff')">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="activeSuggestions['shared-dropoff'] && activeSuggestions['shared-dropoff'].length > 0">
                                            <ng-container *ngIf="isCityArray(activeSuggestions['shared-dropoff'])">
                                                <div *ngFor="let city of activeSuggestions['shared-dropoff']"
                                                    class="city-suggestion"
                                                    (click)="selectCity(city.name, city.code, 'shared-dropoff')">
                                                    <span class="city-name">{{city.name}}</span>
                                                    <span class="city-code">{{city.code}}</span>
                                                    <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                        {{city.state}}</div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Date</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-calendar input-icon"></i>
                                            <input type="text" class="form-input datecab"
                                                [(ngModel)]="formValues.sharedDateTime" placeholder="2025-09-20">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Passengers <small>(Age 2yrs & above)</small></label>
                                        <div class="passenger-counter">
                                            <button class="counter-btn" [disabled]="formValues.sharedPassengers <= 1"
                                                (click)="updateSharedPassengers(-1)">-</button>
                                            <span class="counter-value">{{formValues.sharedPassengers}}
                                            </span>
                                            <button class="counter-btn" (click)="updateSharedPassengers(1)">+</button>
                                        </div>
                                    </div>

                                    <button class="search-btn" (click)="searchCabs('shared')">


                                        <span><i class="fas fa-search"></i></span>
                                    </button>
                                </div>

                                <div class="location-details" [class.active]="locationDetailsVisible['shared']">
                                    <h3>üìç Specify Pickup & Drop-off Locations</h3>
                                    <div class="location-row">
                                        <div class="form-group city-select">
                                            <label>Pickup Location</label>
                                            <div class="input-with-icon">
                                                <i class="fas fa-location-dot input-icon"></i>
                                                <input type="text" class="form-input city-input"
                                                    placeholder="Enter specific pickup location"
                                                    [(ngModel)]="formValues.sharedPickupLocation"
                                                    (input)="showLocationSuggestions(formValues.sharedPickupLocation, 'shared-pickup-specific')"
                                                    (focus)="showLocationSuggestionsOnFocus('shared-pickup-specific')"
                                                    (blur)="hideLocationSuggestions('shared-pickup-specific')">
                                            </div>
                                            <div class="city-suggestions"
                                                [class.active]="activeSuggestions['shared-pickup-specific'] && activeSuggestions['shared-pickup-specific'].length > 0">
                                                <ng-container
                                                    *ngIf="!isCityArray(activeSuggestions['shared-pickup-specific'])">
                                                    <div *ngFor="let location of activeSuggestions['shared-pickup-specific']"
                                                        class="city-suggestion"
                                                        (click)="selectLocation(location, 'shared-pickup-specific')">
                                                        <span class="city-name">{{location}}</span>
                                                        <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                            {{selectedCities.shared.pickup}}</div>
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>

                                        <!-- <button class="swap-btn" (click)="swapSpecificLocations('shared')">
                                        <span>‚áÑ</span>
                                    </button> -->

                                        <div class="form-group city-select">
                                            <label>Drop-off Location</label>
                                            <div class="input-with-icon">
                                                <i class="fas fa-location-dot input-icon"></i>
                                                <input type="text" class="form-input city-input"
                                                    placeholder="Enter specific drop-off location"
                                                    [(ngModel)]="formValues.sharedDropoffLocation"
                                                    (input)="showLocationSuggestions(formValues.sharedDropoffLocation, 'shared-dropoff-specific')"
                                                    (focus)="showLocationSuggestionsOnFocus('shared-dropoff-specific')"
                                                    (blur)="hideLocationSuggestions('shared-dropoff-specific')">
                                            </div>
                                            <div class="city-suggestions"
                                                [class.active]="activeSuggestions['shared-dropoff-specific'] && activeSuggestions['shared-dropoff-specific'].length > 0">
                                                <ng-container
                                                    *ngIf="!isCityArray(activeSuggestions['shared-dropoff-specific'])">
                                                    <div *ngFor="let location of activeSuggestions['shared-dropoff-specific']"
                                                        class="city-suggestion"
                                                        (click)="selectLocation(location, 'shared-dropoff-specific')">
                                                        <span class="city-name">{{location}}</span>
                                                        <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                            {{selectedCities.shared.dropoff}}</div>
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="features">
                                    <div class="feature">
                                        <span class="feature-icon">üí∞</span>
                                        <span>Shared rides, shared costs</span>
                                    </div>
                                    <div class="feature">
                                        <span class="feature-icon">üåç</span>
                                        <span>Eco-friendly travel</span>
                                    </div>
                                    <div class="feature">
                                        <span class="feature-icon">üë•</span>
                                        <span>Meet fellow travelers</span>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                        <ng-container *ngSwitchCase="'flights'">
                            <!-- Flights tab content -->
                            <div class="booking-form tab-2">
                                <div class="trip-type">
                                    <button [class.active]="tripType === 'one-way'" (click)="setTripType('one-way')">One
                                        Way</button>
                                    <button [class.active]="tripType === 'round-trip'"
                                        (click)="setTripType('round-trip')">Round Trip</button>
                                    <button [class.active]="tripType === 'multi-city'"
                                        (click)="setTripType('multi-city')">Multi City</button>
                                </div>

                                <div class="travelers-dropdown form-group" *ngIf="tripType === 'multi-city'">

                                    <label>Travellers & Class</label>

                                    <button class="travelers-btn tmult" (click)="toggleTravelersPanel()">
                                        <span>{{getTravelersText()}}</span>
                                    </button>
                                    <div class="travelers-panel" [class.active]="isTravelersOpen">
                                        <h3>Travellers</h3>

                                        <div class="traveler-row">
                                            <div class="traveler-info">
                                                <h4>Adults</h4>
                                                <p>12 yrs or above</p>
                                            </div>
                                            <div class="counter">
                                                <button class="counter-btn" [disabled]="!canDecrease('adults')"
                                                    [class.active]="counts.adults > 1"
                                                    (click)="updateCount('adults', -1)">-</button>
                                                <span class="counter-value">{{counts.adults}}</span>
                                                <button class="counter-btn"
                                                    (click)="updateCount('adults', 1)">+</button>
                                            </div>
                                        </div>

                                        <div class="traveler-row">
                                            <div class="traveler-info">
                                                <h4>Children</h4>
                                                <p>2 - 12 yrs</p>
                                            </div>
                                            <div class="counter">
                                                <button class="counter-btn" [disabled]="!canDecrease('children')"
                                                    [class.active]="counts.children > 0"
                                                    (click)="updateCount('children', -1)">-</button>
                                                <span class="counter-value">{{counts.children}}</span>
                                                <button class="counter-btn"
                                                    (click)="updateCount('children', 1)">+</button>
                                            </div>
                                        </div>

                                        <div class="traveler-row">
                                            <div class="traveler-info">
                                                <h4>Infants</h4>
                                                <p>0 - 2 yrs</p>
                                            </div>
                                            <div class="counter">
                                                <button class="counter-btn" [disabled]="!canDecrease('infants')"
                                                    [class.active]="counts.infants > 0"
                                                    (click)="updateCount('infants', -1)">-</button>
                                                <span class="counter-value">{{counts.infants}}</span>
                                                <button class="counter-btn"
                                                    (click)="updateCount('infants', 1)">+</button>
                                            </div>
                                        </div>



                                        <div class="class-selection">
                                            <h4>Travel Class</h4>
                                            <div class="class-options">
                                                <label class="class-option">
                                                    <input type="radio" name="travelClass" value="economy"
                                                        [(ngModel)]="selectedClass" (change)="updateClass('economy')">
                                                    <span class="class-label">Economy</span>
                                                </label>
                                                <label class="class-option">
                                                    <input type="radio" name="travelClass" value="business"
                                                        [(ngModel)]="selectedClass" (change)="updateClass('business')">
                                                    <span class="class-label">Business</span>
                                                </label>
                                                <label class="class-option">
                                                    <input type="radio" name="travelClass" value="first"
                                                        [(ngModel)]="selectedClass" (change)="updateClass('first')">
                                                    <span class="class-label">First</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="panel-actions">
                                            <button class="done-btn" (click)="closeTravelersPanel()">Done</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Flight Routes -->
                                <div *ngFor="let route of flightRoutes; let i = index" class="form-row">
                                    <div class="route-header" *ngIf="tripType === 'multi-city'">
                                        <span class="route-number">Route {{i + 1}}</span>
                                        <button class="remove-route-btn" (click)="removeFlightRoute(i)"
                                            [disabled]="flightRoutes.length <= 1">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>

                                    <div class="form-group city-select">
                                        <label>From</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-plane-departure input-icon"></i>
                                            <input type="text" class="form-input city-input"
                                                [class.error]="isSameCitySelected(route.from, route.to)"
                                                placeholder="Enter departure city" [(ngModel)]="route.from"
                                                (focus)="showCitySuggestionsOnFocus('flight-from-' + i)"
                                                (input)="showCitySuggestions(route.from, 'flight-from-' + i)">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="getMultiCitySuggestions('flight-from-' + i).length > 0">
                                            <div *ngFor="let city of getMultiCitySuggestions('flight-from-' + i)"
                                                class="city-suggestion"
                                                (click)="selectMultiCity(city.name, city.code, 'flight-from-' + i)">
                                                <span class="city-name">{{city.name}}</span>
                                                <span class="city-code">{{city.code}}</span>
                                                <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                    {{city.state}}</div>
                                            </div>
                                        </div>
                                        <div class="validation-error" *ngIf="isSameCitySelected(route.from, route.to)">
                                            {{getValidationMessage(route.from, route.to)}}
                                        </div>
                                    </div>

                                    <button class="swap-btn" (click)="swapFlightLocations(i)"
                                        [ngClass]="tripType === 'multi-city' ? 'nesap swap-btn' : ''">
                                        <span>‚áÑ</span>
                                    </button>

                                    <div class="form-group city-select">
                                        <label>To</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-plane-arrival input-icon"></i>
                                            <input type="text" class="form-input city-input"
                                                [class.error]="isSameCitySelected(route.from, route.to)"
                                                placeholder="Enter destination city" [(ngModel)]="route.to"
                                                (focus)="showCitySuggestionsOnFocus('flight-to-' + i)"
                                                (input)="showCitySuggestions(route.to, 'flight-to-' + i)">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="getMultiCitySuggestions('flight-to-' + i).length > 0">
                                            <div *ngFor="let city of getMultiCitySuggestions('flight-to-' + i)"
                                                class="city-suggestion"
                                                (click)="selectMultiCity(city.name, city.code, 'flight-to-' + i)">
                                                <span class="city-name">{{city.name}}</span>
                                                <span class="city-code">{{city.code}}</span>
                                                <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                    {{city.state}}</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Departure</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-calendar input-icon"></i>
                                            <input type="text" placeholder="2025-09-20"
                                                class="form-input dateflight-departure" [(ngModel)]="route.date">
                                        </div>
                                    </div>

                                    <div class="form-group return-field"
                                        [style.display]="tripType === 'round-trip' && i === 0 ? 'block' : 'none'">
                                        <label>Return</label>
                                        <input type="text" class="form-input dateflight-return"
                                            [(ngModel)]="formValues.flightReturn" placeholder="2024-10-08">
                                    </div>

                                    <div class="travelers-dropdown form-group" *ngIf="tripType !== 'multi-city'">
                                        <label>Travellers & Class</label>
                                        <button class="travelers-btn" (click)="toggleTravelersPanel()">
                                            <span>{{getTravelersText()}}</span>
                                        </button>
                                        <div class="travelers-panel" [class.active]="isTravelersOpen">
                                            <h3>Travellers</h3>

                                            <div class="traveler-row">
                                                <div class="traveler-info">
                                                    <h4>Adults</h4>
                                                    <p>12 yrs or above</p>
                                                </div>
                                                <div class="counter">
                                                    <button class="counter-btn" [disabled]="!canDecrease('adults')"
                                                        [class.active]="counts.adults > 1"
                                                        (click)="updateCount('adults', -1)">-</button>
                                                    <span class="counter-value">{{counts.adults}}</span>
                                                    <button class="counter-btn"
                                                        (click)="updateCount('adults', 1)">+</button>
                                                </div>
                                            </div>

                                            <div class="traveler-row">
                                                <div class="traveler-info">
                                                    <h4>Children</h4>
                                                    <p>2 - 12 yrs</p>
                                                </div>
                                                <div class="counter">
                                                    <button class="counter-btn" [disabled]="!canDecrease('children')"
                                                        [class.active]="counts.children > 0"
                                                        (click)="updateCount('children', -1)">-</button>
                                                    <span class="counter-value">{{counts.children}}</span>
                                                    <button class="counter-btn"
                                                        (click)="updateCount('children', 1)">+</button>
                                                </div>
                                            </div>

                                            <div class="traveler-row">
                                                <div class="traveler-info">
                                                    <h4>Infants</h4>
                                                    <p>0 - 2 yrs</p>
                                                </div>
                                                <div class="counter">
                                                    <button class="counter-btn" [disabled]="!canDecrease('infants')"
                                                        [class.active]="counts.infants > 0"
                                                        (click)="updateCount('infants', -1)">-</button>
                                                    <span class="counter-value">{{counts.infants}}</span>
                                                    <button class="counter-btn"
                                                        (click)="updateCount('infants', 1)">+</button>
                                                </div>
                                            </div>



                                            <div class="class-selection">
                                                <h3>Class</h3>
                                                <div class="class-options">
                                                    <button class="class-option"
                                                        [class.active]="selectedClass === 'economy'"
                                                        (click)="updateClass('economy')">Economy</button>
                                                    <button class="class-option"
                                                        [class.active]="selectedClass === 'business'"
                                                        (click)="updateClass('business')">Business</button>
                                                    <button class="class-option"
                                                        [class.active]="selectedClass === 'first'"
                                                        (click)="updateClass('first')">First</button>
                                                </div>
                                            </div>

                                            <div class="panel-actions">
                                                <button class="done-btn" (click)="closeTravelersPanel()">Done</button>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Add Route Button for Multi City -->
                                    <button class="search-btn" (click)="searchFlights()"
                                        *ngIf="tripType !== 'multi-city'">
                                        <span><i class="fas fa-search"></i></span>
                                    </button>
                                </div>



                                <!-- Travelers & Class for single routes -->

                                <!-- Single Travelers & Class for Multi City -->
                                <div class="btnrow">
                                    <div *ngIf="tripType === 'multi-city'" class="add-route-section">
                                        <button class="add-route-btn" (click)="addFlightRoute()"
                                            [disabled]="flightRoutes.length >= 5">
                                            <i class="fas fa-plus"></i> Add Another Route
                                        </button>
                                    </div>


                                    <button class="search-btn" (click)="searchFlights()"
                                        *ngIf="tripType === 'multi-city'">
                                        <span><i class="fas fa-search"></i></span>
                                    </button>
                                </div>
                                <div class="features">
                                    <div class="feature">
                                        <span class="feature-icon">üõ°Ô∏è</span>
                                        <span>Priority customer service</span>
                                        <span class="feature-icon">üí≥</span>
                                        <span>Lowest fare guaranteed</span>
                                    </div>
                                </div>

                            </div>
                        </ng-container>

                        <ng-container *ngSwitchCase="'reserved-cabs'">
                            <!-- Reserved Cabs tab content -->
                            <div class="booking-form tab-3">
                                <div class="cab-form-row">
                                    <div class="form-group city-select">
                                        <label>From</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-location-dot input-icon"></i>
                                            <input type="text" class="form-input city-input"
                                                placeholder="Enter pick-up city" [(ngModel)]="formValues.reservedPickup"
                                                (focus)="showCitySuggestionsOnFocus('reserved-pickup')"
                                                (input)="showCitySuggestions(formValues.reservedPickup, 'reserved-pickup')">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="activeSuggestions['reserved-pickup'] && activeSuggestions['reserved-pickup'].length > 0">
                                            <ng-container *ngIf="isCityArray(activeSuggestions['reserved-pickup'])">
                                                <div *ngFor="let city of activeSuggestions['reserved-pickup']"
                                                    class="city-suggestion"
                                                    (click)="selectCity(city.name, city.code, 'reserved-pickup')">
                                                    <span class="city-name">{{city.name}}</span>
                                                    <span class="city-code">{{city.code}}</span>
                                                    <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                        {{city.state}}</div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <button class="swap-btn" (click)="swapCabLocations('reserved')">
                                        <span>‚áÑ</span>
                                    </button>

                                    <div class="form-group city-select">
                                        <label>To</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-location-dot input-icon"></i>
                                            <input type="text" class="form-input city-input"
                                                placeholder="Enter drop-off city"
                                                [(ngModel)]="formValues.reservedDropoff"
                                                (focus)="showCitySuggestionsOnFocus('reserved-dropoff')"
                                                (input)="showCitySuggestions(formValues.reservedDropoff, 'reserved-dropoff')">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="activeSuggestions['reserved-dropoff'] && activeSuggestions['reserved-dropoff'].length > 0">
                                            <ng-container *ngIf="isCityArray(activeSuggestions['reserved-dropoff'])">
                                                <div *ngFor="let city of activeSuggestions['reserved-dropoff']"
                                                    class="city-suggestion"
                                                    (click)="selectCity(city.name, city.code, 'reserved-dropoff')">
                                                    <span class="city-name">{{city.name}}</span>
                                                    <span class="city-code">{{city.code}}</span>
                                                    <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                        {{city.state}}</div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Date</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-calendar input-icon"></i>
                                            <input type="text" class="form-input datecabreserved-date"
                                                placeholder="2025-09-24" [(ngModel)]="formValues.reservedDate">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Pickup Time</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-clock input-icon"></i>
                                            <input type="text" class="form-input time-input-display" 
                                                [value]="formatTimeDisplay(formValues.reservedTime)"
                                                placeholder="12:00 PM" 
                                                (click)="openTimePicker()"
                                                readonly>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Passengers <small>(Age 2yrs & above)</small></label>
                                        <div class="passenger-counter">
                                            <button class="counter-btn" [disabled]="formValues.reservedPassengers <= 1"
                                                (click)="updateReservedPassengers(-1)">-</button>
                                            <span class="counter-value">{{formValues.reservedPassengers}}</span>
                                            <button class="counter-btn" (click)="updateReservedPassengers(1)">+</button>
                                        </div>
                                    </div>

                                    <button class="search-btn" (click)="searchCabs('reserved')">
                                        <span><i class="fas fa-search"></i></span>
                                    </button>
                                </div>

                                <div class="location-details" [class.active]="locationDetailsVisible['reserved']">
                                    <h3>üìç Specify Pickup & Drop-off Locations</h3>
                                    <div class="location-row">
                                        <div class="form-group">
                                            <label>Pickup Location</label>
                                            <div class="input-with-icon">
                                                <i class="fas fa-location-dot input-icon"></i>
                                                <input type="text" class="form-input"
                                                    placeholder="Enter specific pickup location"
                                                    [(ngModel)]="formValues.reservedPickupLocation">
                                            </div>
                                        </div>

                                        <!-- <button class="swap-btn" (click)="swapSpecificLocations('reserved')">
                                        <span>‚áÑ</span>
                                    </button> -->

                                        <div class="form-group">
                                            <label>Drop-off Location</label>
                                            <div class="input-with-icon">
                                                <i class="fas fa-location-dot input-icon"></i>
                                                <input type="text" class="form-input"
                                                    placeholder="Enter specific drop-off location"
                                                    [(ngModel)]="formValues.reservedDropoffLocation">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="features">
                                    <div class="feature">
                                        <span class="feature-icon">‚è∞</span>
                                        <span>On-time guarantee</span>
                                    </div>
                                    <div class="feature">
                                        <span class="feature-icon">üõ°Ô∏è</span>
                                        <span>Verified drivers</span>
                                    </div>
                                    <div class="feature">
                                        <span class="feature-icon">üí≥</span>
                                        <span>Flexible payment options</span>
                                    </div>
                                </div>
                            </div>
                        </ng-container>


                    </ng-container>
                </div>

            </ng-container>
        </div>
    </div>
</div>
<!-- End of Booking Form and Navigation Section -->

<!-- Special Offers and Content Sections -->
<div class="content-sections-wrapper">
    <!-- Shared Cabs Special Offers -->
    <section class="special-offers-section" *ngIf="currentTab === 'shared-cabs'">
        <div class="special-offers-content">
            <div class="offers-header">
                <h2>Special Offers</h2>
                <p>Grab the best deals and discounts on flights, hotels, and cab bookings</p>
            </div>

            <div class="offers-slider-container">
                <div class="offers-slider-track">
                    <div *ngFor="let offer of infiniteOffers; trackBy: trackByOfferId"
                        class="offer-card">
                        <div class="offer-card-inner">
                            <!-- Top - Image Section -->
                            <div class="offer-image-section">
                                <div class="offer-image"
                                    [style.background-image]="'url(' + offer.image + ')'">
                                </div>
                            </div>

                            <!-- Bottom - Content Section -->
                            <div class="offer-content">
                                <h3 class="offer-title">{{ offer.title }}</h3>
                                <p class="offer-description">{{ offer.description }}</p>
                                <p class="offer-subtitle">{{ offer.subtitle }}</p>

                                <div class="offer-code-section">
                                    <span class="offer-code-label">Use Code</span>
                                    <span class="offer-code">{{ offer.code }}</span>
                                </div>

                                <a href="#" class="offer-cta-btn">
                                    <span>{{ offer.ctaText }}</span>
                                    <i class="fas fa-chevron-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Shared Cabs Content Section -->
    <div class="content-section" *ngIf="currentTab === 'shared-cabs'">
        <h2>Affordable Shared Cab Services</h2>
        <div class="content-grid">
            <div class="content-card">
                <h3><i class="fas fa-users card-icon"></i>Share & Save</h3>
                <p>Split the ride cost with fellow travelers going in the same direction. Our
                    shared
                    cab service
                    offers
                    significant savings while maintaining comfort and safety standards.</p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-route card-icon"></i>Optimized Routes</h3>
                <p>Our intelligent routing system ensures the most efficient pickup and drop-off
                    sequence,
                    minimizing
                    travel time while maximizing convenience for all passengers.</p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-leaf card-icon"></i>Eco-Friendly Travel</h3>
                <p>Reduce your carbon footprint by sharing rides. Every shared journey helps
                    decrease traffic
                    congestion
                    and environmental impact while supporting sustainable transportation.</p>
            </div>
        </div>
        <div class="highlight-stats">
            <div class="stat">
                <span class="stat-number">60%</span>
                <span class="stat-label">Cost Savings</span>
            </div>
            <div class="stat">
                <span class="stat-number">10K+</span>
                <span class="stat-label">Daily Rides</span>
            </div>
            <div class="stat">
                <span class="stat-number">4.8‚≠ê</span>
                <span class="stat-label">User Rating</span>
            </div>
            <div class="stat">
                <span class="stat-number">100+</span>
                <span class="stat-label">Cities Covered</span>
            </div>
        </div>
    </div>

    <!-- Flights Special Offers -->
    <section class="special-offers-section" *ngIf="currentTab === 'flights'">
        <div class="offers-header">
            <h2>Special Offers</h2>
            <p>Grab the best deals and discounts on flights, hotels, and cab bookings</p>
        </div>

        <div class="offers-slider-container">
            <div class="offers-slider-track">
                <div *ngFor="let offer of infiniteOffers; trackBy: trackByOfferId"
                    class="offer-card">
                    <div class="offer-card-inner">
                        <!-- Top - Image Section -->
                        <div class="offer-image-section">
                            <div class="offer-image"
                                [style.background-image]="'url(' + offer.image + ')'">
                            </div>
                            <div class="offer-subtitle-under-image">{{ offer.subtitle }}</div>
                        </div>

                        <!-- Bottom - Content Section -->
                        <div class="offer-content">
                            <h3 class="offer-title">{{ offer.title }}</h3>
                            <p class="offer-description">{{ offer.description }}</p>

                            <div class="offer-code-section">
                                <span class="offer-code-label">Use Code</span>
                                <span class="offer-code">{{ offer.code }}</span>
                            </div>

                            <a href="#" class="offer-cta-btn">
                                <span>{{ offer.ctaText }}</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Flight Content Section -->
    <div class="content-section" *ngIf="currentTab === 'flights'">
        <h2>Why Choose Our Flight Booking Service?</h2>
        <div class="content-grid">
            <div class="content-card">
                <h3><i class="fas fa-plane-departure card-icon"></i>Best Flight Deals</h3>
                <p>Compare prices from multiple airlines and get the best deals on domestic and
                    international
                    flights. Our smart algorithm finds you the most affordable options without
                    compromising on
                    quality.</p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-shield-alt card-icon"></i>Secure Booking</h3>
                <p>Your transactions are protected with bank-level security. We use advanced
                    encryption to
                    ensure your personal and payment information remains safe throughout the
                    booking
                    process.
                </p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-headset card-icon"></i>24/7 Support</h3>
                <p>Our dedicated customer support team is available round-the-clock to assist
                    you
                    with booking
                    queries, changes, or any travel-related concerns you might have.</p>
            </div>
        </div>
        <div class="highlight-stats">
            <div class="stat">
                <span class="stat-number">1M+</span>
                <span class="stat-label">Happy Customers</span>
            </div>
            <div class="stat">
                <span class="stat-number">500+</span>
                <span class="stat-label">Airlines Partners</span>
            </div>
            <div class="stat">
                <span class="stat-number">99.9%</span>
                <span class="stat-label">Booking Success Rate</span>
            </div>
            <div class="stat">
                <span class="stat-number">24/7</span>
                <span class="stat-label">Customer Support</span>
            </div>
        </div>
    </div>

    <!-- Reserved Cabs Special Offers -->
    <section class="special-offers-section" *ngIf="currentTab === 'reserved-cabs'">
        <div class="offers-header">
            <h2>Special Offers</h2>
            <p>Grab the best deals and discounts on flights, hotels, and cab bookings</p>
        </div>

        <div class="offers-slider-container">
            <div class="offers-slider-track">
                <div *ngFor="let offer of infiniteOffers; trackBy: trackByOfferId"
                    class="offer-card">
                    <div class="offer-card-inner">
                        <!-- Top - Image Section -->
                        <div class="offer-image-section">
                            <div class="offer-image"
                                [style.background-image]="'url(' + offer.image + ')'">
                            </div>
                        </div>

                        <!-- Bottom - Content Section -->
                        <div class="offer-content">
                            <h3 class="offer-title">{{ offer.title }}</h3>
                            <p class="offer-description">{{ offer.description }}</p>
                            <p class="offer-subtitle">{{ offer.subtitle }}</p>

                            <div class="offer-code-section">
                                <span class="offer-code-label">Use Code</span>
                                <span class="offer-code">{{ offer.code }}</span>
                            </div>

                            <a href="#" class="offer-cta-btn">
                                <span>{{ offer.ctaText }}</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reserved Cabs Content Section -->
    <div class="content-section" *ngIf="currentTab === 'reserved-cabs'">
        <h2>Premium Reserved Cab Experience</h2>
        <div class="content-grid">
            <div class="content-card">
                <h3><i class="fas fa-crown card-icon"></i>Exclusive & Private</h3>
                <p>Enjoy your own private vehicle with no sharing required. Perfect for business
                    trips, family
                    outings,
                    or when you need complete privacy and comfort during your journey.</p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-user-tie card-icon"></i>Professional Drivers</h3>
                <p>All our drivers are thoroughly vetted, professionally trained, and maintain
                    high
                    standards of
                    courtesy and service. Experience smooth, safe, and reliable transportation.
                </p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-car-side card-icon"></i>Premium Fleet</h3>
                <p>Choose from our wide range of well-maintained vehicles including hatchbacks,
                    sedans, SUVs, and
                    luxury
                    cars. All vehicles are regularly serviced and sanitized.</p>
            </div>
        </div>
        <div class="highlight-stats">
            <div class="stat">
                <span class="stat-number">5‚≠ê</span>
                <span class="stat-label">Service Rating</span>
            </div>
            <div class="stat">
                <span class="stat-number">98%</span>
                <span class="stat-label">On-Time Performance</span>
            </div>
            <div class="stat">
                <span class="stat-number">500+</span>
                <span class="stat-label">Premium Vehicles</span>
            </div>
            <div class="stat">
                <span class="stat-number">24/7</span>
                <span class="stat-label">Available Service</span>
            </div>
        </div>
    </div>
</div>
<!-- End of Special Offers and Content Sections -->

<!-- Sliding Functionality Section -->
<div class="sliding-section-wrapper">
    <section class="services-slider-section">
                <div class="services-header">
                    <h2>Our Services</h2>
                    <p>Discover our comprehensive range of travel solutions designed to make your journey
                        seamless and memorable</p>
                </div>

                <div class="services-slider-container">
                    <div class="services-slider-track">
                        <div *ngFor="let service of infiniteServices; trackBy: trackByServiceId" class="service-card">
                            <div class="service-card-inner">
                                <div class="service-image-container">
                                    <div class="service-image" [style.background-image]="'url(' + service.image + ')'">
                                        <div class="service-overlay"></div>

                                    </div>
                                </div>

                                <div class="service-content">
                                    <h3 class="service-title">{{ service.title }}</h3>
                                    <p class="service-description">{{ service.description }}</p>
                                    <a href="{{service.link}}" class="service-cta-btn">
                                        <span>Learn More</span>
                                        <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
</div>
<!-- End of Sliding Functionality Section -->

            <!-- <img src="../../assets/images/banner.jpeg" alt="banner" class="bannerbet"/> -->
            <section class="airport-connectivity-section">
                <div class="connectivity-container">
                    <div class="connectivity-content">
                        <h1>Expert in Airport Connectivity</h1>
                        <p class="subtitle">Reliable Shared Cabs from Bagdogra, Guwahati, Sikkim, Shillong & Tezpur</p>

                        <h2 class="travel-solution-title">We Offer Seamless Travel solution</h2>

                        <ul class="connectivity-links">
                            <li><a
                                    href="https://wizzride.com/ourservices/Luxury-Shared-Cabs/Bagdogra_Airport_To_Darjeeling_Shared_Cab_Service/">Bagdogra
                                    Airport to Darjeeling</a></li>
                            <li><a
                                    href="https://wizzride.com/ourservices/Luxury-Shared-Cabs/Bagdogra%20Airport%20to%20Gangtok%20-%20Shared%20Cab%20Service/">Bagdogra
                                    Airport to Gangtok</a></li>
                            <li><a
                                    href="https://wizzride.com/ourservices/Luxury-Shared-Cabs/Bagdogra_Airport_To_Kalimpong_Shared_Cab_Service/">Bagdogra
                                    Airport to Kalimpong</a></li>
                            <li><a href="https://wizzride.com/ourservices/Luxury-Shared-Cabs/guwahati-to-shillong/">Guwahati
                                    Airport to Shillong and Tezpur Transfers</a></li>
                        </ul>

                        <div class="service-description">
                            <p>Easy trips from Bagdogra Airport to Sikkim or Kalimpoong to Bagdogra Airport, or Guwahati
                                Airport to Shillong, Guwahati Airport to Tezpur, WizzRide ensures reliable service</p>
                        </div>

                        <p class="cta-text">Start your journey with confidence and <span class="cta-highlight">book your
                                WizzRide cab today</span> for a seamless travel experience!</p>
                    </div>

                    <div class="connectivity-illustration">
                        <img src="https://wizzride.com/illustration1.f909f03abb56d801.svg" alt="Travel Illustration">
                    </div>
                </div>
            </section>


            <section class="app-download-section">
                <div class="app-download-container">
                    <!-- Left Side - Phone Mockup with Features -->
                    <div class="phone-mockup-section">
                        <div class="feature-bullets">
                            <div class="feature-item">
                                <div class="feature-bullet"></div>
                                <span class="feature-text">Data Privacy,<br>Safety & Security</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-bullet"></div>
                                <span class="feature-text">Important & Useful<br>Latest In-App features</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-bullet"></div>
                                <span class="feature-text">Never miss Important<br>Notifications & Updates</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-bullet"></div>
                                <span class="feature-text">Seamless User Experience<br>through Latest Technology</span>
                            </div>
                        </div>

                        <div class="phone-mockup">
                            <img src="../../assets/images/phonemockup.png" alt="WizzRide App Interface">
                        </div>
                    </div>

                    <!-- Right Side - Content -->
                    <div class="app-content">
                        <span class="section-tag">Try On Mobile</span>

                        <h1>Life's much easier on the <span class="highlight">App.</span></h1>

                        <p class="subtitle">Download the <span class="brand">WizzRide App</span> today for
                            <strong>seamless
                                travel booking</strong> and a <strong>smarter travel experience.</strong></p>

                        <div class="download-section">


                            <div class="download-cta">
                                <div class="qr-code-container">
                                    <div class="qr-code">
                                        <img src="../../assets/images/qrframe.png" alt="wizrideappqr" />
                                    </div>
                                    <span class="scan-text">Scan Me</span>
                                </div>

                                <div class="store-buttons">
                                    <a href="#" class="store-btn">
                                        <i class="fab fa-google-play"></i>
                                        <div class="store-btn-text">
                                            <small>Get it on</small>
                                            <strong>Google Play</strong>
                                        </div>
                                    </a>
                                    <a href="#" class="store-btn">
                                        <i class="fab fa-apple"></i>
                                        <div class="store-btn-text">
                                            <small>Download on the</small>
                                            <strong>App Store</strong>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </section>

            <section class="statistics-section">
                <div class="statistics-header">
                    <h2>Our Numbers Say It All</h2>
                </div>

                <div class="statistics-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="--delay: 1">
                            <img src="https://wizzride.com/assets/images/icon1.png" alt="Years of Service">
                        </div>
                        <span class="stat-number" data-animate>7+</span>
                        <div class="stat-label">Years of service</div>
                        <div class="stat-description">Trusted experience in the travel industry</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="--delay: 2">
                            <img src="https://wizzride.com/assets/images/icon2.png" alt="Passengers Served">
                        </div>
                        <span class="stat-number" data-animate>201,574+</span>
                        <div class="stat-label">Passengers Served</div>
                        <div class="stat-description">Happy customers who chose our service</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="--delay: 3">
                            <img src="https://wizzride.com/assets/images/icon3.png" alt="Trips Completed">
                        </div>
                        <span class="stat-number" data-animate>180,801+</span>
                        <div class="stat-label">Trips Completed</div>
                        <div class="stat-description">Successful journeys across destinations</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="--delay: 4">
                            <img src="https://wizzride.com/assets/images/icon4.png" alt="Kilometers Covered">
                        </div>
                        <span class="stat-number" data-animate>23,401,092+</span>
                        <div class="stat-label">Kilometers Covered</div>
                        <div class="stat-description">Miles of safe and comfortable travel</div>
                    </div>
                </div>
            </section>



<div class="container">
<section class="testimonials-section">
    <div class="services-header">
        <h2>What Our Customers Say</h2>
        <p>Hear from our satisfied customers about their amazing travel experiences with WizzRide</p>
    </div>

    <div class="sectnew">
        <div class="slider-container" #testimonialSwiper (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()"
            (touchstart)="onTouchStart($event)" (touchend)="onTouchEnd($event)" (mousedown)="onMouseDown($event)"
            (mousemove)="onMouseMove($event)" (mouseup)="onMouseUp($event)" (keydown)="onKeyDown($event)" tabindex="0">

            <div class="slider-wrapper">
                <div class="slide" [class.active]="getSlideClass(i) === 'active'"
                    [class.prev]="getSlideClass(i) === 'prev'" [class.next]="getSlideClass(i) === 'next'"
                    [class.far-prev]="getSlideClass(i) === 'far-prev'"
                    [class.far-next]="getSlideClass(i) === 'far-next'" [class.hidden]="getSlideClass(i) === 'hidden'"
                    *ngFor="let testimonial of testimonials; let i = index; trackBy: trackByTestimonial"
                    (click)="goToSlide(i)">

                    <div class="testimonialbox">
                        <img src="https://i.ibb.co/ZcNh6FY/download.png" alt="" class="quote">

                        <div class="content">
                            <p>{{ testimonial.text }}</p>

                            <div class="details">
                                <div class="imgBx">
                                    <img [src]="testimonial.avatar" [alt]="testimonial.name" />
                                </div>
                                <h3>
                                    {{ testimonial.name }}
                                    <!-- <strong>{{ testimonial.location }}</strong> -->
                                </h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
</div>  
<section class="japan-experience-section">
    <!-- Video Background -->
    <video class="japan-video" autoplay muted loop playsinline preload="metadata">
        <source src="https://wizzride.com/assets/images/JapanVideo.mp4" type="video/mp4">
        <!-- Fallback for browsers that don't support video -->
        Your browser does not support the video tag.
    </video>

    <!-- Overlay -->
    <div class="japan-overlay"></div>

    <!-- Decorative Elements -->
    <div class="japan-decoration japan-decoration-1"></div>
    <div class="japan-decoration japan-decoration-2"></div>
    <div class="japan-decoration japan-decoration-3"></div>

    <!-- Japan Content -->
    <div class="japan-content">
        <h1 class="japan-title">
            Experience Japan
        </h1>
        <p class="japan-subtitle">
            Come with Us on a 8 Days Trip of a Lifetime
        </p>
        <a href="https://wizzride.com/japantour" class="japan-cta">
            See More
        </a>
    </div>
</section>

<!-- Time Picker Modal -->
<div class="time-picker-overlay" [class.active]="timePickerVisible" (click)="closeTimePicker()">
    <div class="time-picker-modal" (click)="$event.stopPropagation()">
        <div class="time-picker-header">
            <h3>Select Pick Up Time</h3>
            <button class="close-btn" (click)="closeTimePicker()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="time-picker-content">
            <div class="time-columns">
                <!-- Hours Column -->
                <div class="time-column">
                    <div class="column-header">Hrs</div>
                    <div class="time-scroll-container">
                        <div class="time-options" #hoursContainer>
                            <div class="time-option" 
                                 *ngFor="let hour of hours" 
                                 [class.selected]="selectedHour === hour"
                                 (click)="selectHour(hour)">
                                {{hour}}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Minutes Column -->
                <div class="time-column">
                    <div class="column-header">Min</div>
                    <div class="time-scroll-container">
                        <div class="time-options">
                            <div class="time-option" 
                                 *ngFor="let minute of minutes" 
                                 [class.selected]="selectedMinute === minute"
                                 (click)="selectMinute(minute)">
                                {{minute}}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- AM/PM Column -->
                <div class="time-column">
                    <div class="column-header">A.M/ P.M</div>
                    <div class="time-scroll-container">
                        <div class="time-options">
                            <div class="time-option" 
                                 [class.selected]="selectedPeriod === 'AM'"
                                 (click)="selectPeriod('AM')">
                                A.M.
                            </div>
                            <div class="time-option" 
                                 [class.selected]="selectedPeriod === 'PM'"
                                 (click)="selectPeriod('PM')">
                                P.M.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="time-picker-footer">
            <button class="done-btn" (click)="confirmTimeSelection()">
                Done
            </button>
        </div>
    </div>
</div>