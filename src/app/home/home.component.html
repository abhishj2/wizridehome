<!-- Homepage Auto Popup -->
<div class="homepage-popup-overlay" *ngIf="showHomepagePopup" (click)="closeHomepagePopup()">
    <div class="homepage-popup-modal" (click)="$event.stopPropagation()">
        <button class="homepage-popup-close" (click)="closeHomepagePopup()" aria-label="Close popup">
            <i class="fas fa-times"></i>
        </button>

        <div class="homepage-popup-image" *ngIf="homepagePopupData?.image">
            <img [src]="homepagePopupData!.image" [alt]="homepagePopupData!.title || 'Popup'" />
        </div>

        <div class="homepage-popup-content">
            <h2 class="homepage-popup-title" *ngIf="homepagePopupData?.title">
                {{ homepagePopupData!.title }}
            </h2>

            <p class="homepage-popup-subtitle" *ngIf="homepagePopupData?.subtitle">
                {{ homepagePopupData!.subtitle }}
            </p>

            <button class="homepage-popup-button" *ngIf="homepagePopupData?.button_text"
                (click)="onHomepagePopupButtonClick()">
                {{ homepagePopupData!.button_text }}
            </button>
        </div>
    </div>
</div>

<div class="phone-modal" *ngIf="showPhonePopup && !isMobileView()" (click)="onModalBackdropClick($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <h3>Important !!!</h3>
        <p class="instruction-text">
            Please Enter Your Correct Phone Number below.<br>
            You will need this later on, as your seat/seats will be<br>
            blocked against this Number.
        </p>
        <div class="phone-input-container">
            <div class="country-phone-row">
                <div class="country-code-dropdown">
                    <select [(ngModel)]="selectedCountryCode" class="country-select">
                        <option *ngFor="let country of countryList" [value]="country.code">
                            {{ country.code }} - {{ country.name }}
                        </option>
                    </select>
                </div>
                <div class="input-group">
                    <div class="input-group-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <input type="tel" class="form-input phone-input" [(ngModel)]="phoneNumber"
                        placeholder="Enter Your Phone No." maxlength="15" (input)="onPhoneInput($event)"
                        (keypress)="onPhoneKeyPress($event)">
                </div>
            </div>
        </div>
        <div class="phone-error" *ngIf="phoneError">{{ phoneError }}</div>
        <div class="actions">
            <button class="search-btn proceed-btn" (click)="confirmPhonePopup()">Proceed With Search</button>
        </div>
    </div>
</div>

<!-- Booking Form and Navigation Section (Desktop) -->
<div class="booking-section-wrapper">
    <div class="container header" (click)="onDocumentClick($event)">

        <!-- Desktop Tabs -->
        <div class="nav-tabs desktop-tabs">
            <button *ngFor="let tab of tabs" class="nav-tab" [class.active]="currentTab === tab"
                (click)="switchTab(tab)">
                <span class="icon" *ngIf="tab === 'shared-cabs'"><img src="assets/images/shared-removebg-preview.png"
                        alt="Wizzride shared cab service" /></span>
                <span class="icon" *ngIf="tab === 'reserved-cabs'"><img src="../../assets/images/reserved.png"
                        alt="Wizzride reserved cab service" /></span>
                <span class="icon" *ngIf="tab === 'flights'"><img src="assets/images/flight.png" alt="flight" /></span>
                {{ tab === 'shared-cabs' ? 'Shared Cabs' : tab === 'reserved-cabs' ? 'Reserved Cabs' : 'Flights' }}
            </button>
        </div>

        <div class="tabs-container">
            <ng-container *ngFor="let tab of tabs">
                <div [id]="tab" class="tab-content" [class.active]="currentTab === tab"
                    [class.slide-out-left]="previousTab === tab && isSliding && slideDirection === 'right'"
                    [class.slide-out-right]="previousTab === tab && isSliding && slideDirection === 'left'"
                    [class.slide-in-right]="currentTab === tab && isSliding && slideDirection === 'right'"
                    [class.slide-in-left]="currentTab === tab && isSliding && slideDirection === 'left'"
                    *ngIf="currentTab === tab || previousTab === tab">
                    <!-- Place the content for each tab here, e.g. use ng-container with ngSwitch or ngIf for each tab -->
                    <ng-container [ngSwitch]="tab">
                        <ng-container *ngSwitchCase="'shared-cabs'">
                            <!-- Shared Cabs tab content -->
                            <div class="booking-form tab-1 shared-form-box">
                                <div class="cab-form-row shared-form">
                                    <div class="form-group city-select">
                                        <label>From</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-location-dot input-icon"></i>
                                            <input type="text" class="form-input city-input"
                                                [class.error]="isSameCitySelected(formValues.sharedPickup, formValues.sharedDropoff)"
                                                placeholder="Source" [(ngModel)]="formValues.sharedPickup"
                                                (focus)="showCitySuggestionsOnFocus('shared-pickup')"
                                                (input)="showCitySuggestions(formValues.sharedPickup, 'shared-pickup')">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="activeSuggestions['shared-pickup'] && activeSuggestions['shared-pickup'].length > 0">
                                            <ng-container *ngIf="isCityArray(activeSuggestions['shared-pickup'])">
                                                <div *ngFor="let city of activeSuggestions['shared-pickup']"
                                                    class="city-suggestion"
                                                    (click)="selectCity(city.name, city.code, 'shared-pickup')">
                                                    <span class="city-name">{{city.name}}</span>
                                                    <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                        {{city.state}}</div>
                                                </div>
                                            </ng-container>
                                        </div>

                                    </div>

                                    <button class="swap-btn" (click)="swapCabLocations('shared')"
                                        aria-label="Swap pickup and dropoff locations">
                                        <span>‚áÑ</span>
                                    </button>

                                    <div class="form-group city-select">
                                        <label>To</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-location-dot input-icon"></i>
                                            <input type="text" class="form-input city-input"
                                                [class.error]="isSameCitySelected(formValues.sharedPickup, formValues.sharedDropoff)"
                                                placeholder="Destination" [(ngModel)]="formValues.sharedDropoff"
                                                (focus)="showCitySuggestionsOnFocus('shared-dropoff')"
                                                (input)="showCitySuggestions(formValues.sharedDropoff, 'shared-dropoff')">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="activeSuggestions['shared-dropoff'] && activeSuggestions['shared-dropoff'].length > 0">
                                            <ng-container *ngIf="isCityArray(activeSuggestions['shared-dropoff'])">
                                                <div *ngFor="let city of activeSuggestions['shared-dropoff']"
                                                    class="city-suggestion"
                                                    (click)="selectCity(city.name, city.code, 'shared-dropoff')">
                                                    <span class="city-name">{{city.name}}</span>
                                                    <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                        {{city.state}}</div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Date</label>
                                        <app-custom-calendar class="shared-cabs-calendar"
                                            [selectedDate]="formValues.sharedDateTime" [minDate]="getTodayDate()"
                                            placeholder="Select Date" (dateSelected)="onSharedDateSelected($event)"
                                            (calendarOpened)="onCalendarOpened()" (calendarClosed)="onCalendarClosed()">
                                        </app-custom-calendar>
                                    </div>

                                    <div class="form-group">
                                        <label>Passengers <small>(Age 2yrs & above)</small></label>
                                        <div class="passenger-counter">
                                            <button class="counter-btn" [disabled]="formValues.sharedPassengers <= 1"
                                                (click)="updateSharedPassengers(-1)">-</button>
                                            <span class="counter-value">{{formValues.sharedPassengers}}
                                            </span>
                                            <button class="counter-btn" (click)="updateSharedPassengers(1)">+</button>
                                        </div>
                                    </div>

                                    <!-- Search button moved below based on location details visibility -->
                                    <button class="search-btn" (click)="searchCabs('shared')"
                                        *ngIf="!locationDetailsVisible['shared']" aria-label="Search shared cabs">
                                        <span>Search</span>
                                    </button>
                                </div>
                                <div class="validation-error"
                                    *ngIf="isSameCitySelected(formValues.sharedPickup, formValues.sharedDropoff)">
                                    {{getValidationMessage(formValues.sharedPickup, formValues.sharedDropoff)}}
                                </div>
                                <div class="location-details" [class.active]="locationDetailsVisible['shared']">
                                    <h3>üìç Specify Pickup & Drop-off Locations</h3>
                                    <div class="location-row">
                                        <div class="form-group city-select">
                                            <label>Pickup Location</label>
                                            <div class="input-with-icon">
                                                <i class="fas fa-location-dot input-icon"></i>
                                                <input type="text" class="form-input city-input"
                                                    placeholder="Enter specific pickup location"
                                                    [(ngModel)]="formValues.sharedPickupLocation"
                                                    (input)="showLocationSuggestions(formValues.sharedPickupLocation, 'shared-pickup-specific')"
                                                    (focus)="showLocationSuggestionsOnFocus('shared-pickup-specific')"
                                                    (blur)="hideLocationSuggestions('shared-pickup-specific')">
                                            </div>
                                            <div class="city-suggestions"
                                                [class.active]="activeSuggestions['shared-pickup-specific'] && activeSuggestions['shared-pickup-specific'].length > 0">
                                                <ng-container
                                                    *ngIf="!isCityArray(activeSuggestions['shared-pickup-specific'])">
                                                    <div *ngFor="let location of activeSuggestions['shared-pickup-specific']"
                                                        class="city-suggestion"
                                                        (click)="selectLocation(location, 'shared-pickup-specific')">
                                                        <span class="city-name">{{location}}</span>
                                                        <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                            {{selectedCities.shared.pickup}}</div>
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>

                                        <!-- <button class="swap-btn" (click)="swapSpecificLocations('shared')">
                                        <span>‚áÑ</span>
                                    </button> -->

                                        <div class="form-group city-select">
                                            <label>Drop-off Location</label>
                                            <div class="input-with-icon">
                                                <i class="fas fa-location-dot input-icon"></i>
                                                <input type="text" class="form-input city-input"
                                                    placeholder="Enter specific drop-off location"
                                                    [(ngModel)]="formValues.sharedDropoffLocation"
                                                    (input)="showLocationSuggestions(formValues.sharedDropoffLocation, 'shared-dropoff-specific')"
                                                    (focus)="showLocationSuggestionsOnFocus('shared-dropoff-specific')"
                                                    (blur)="hideLocationSuggestions('shared-dropoff-specific')">
                                            </div>
                                            <div class="city-suggestions"
                                                [class.active]="activeSuggestions['shared-dropoff-specific'] && activeSuggestions['shared-dropoff-specific'].length > 0">
                                                <ng-container
                                                    *ngIf="!isCityArray(activeSuggestions['shared-dropoff-specific'])">
                                                    <div *ngFor="let location of activeSuggestions['shared-dropoff-specific']"
                                                        class="city-suggestion"
                                                        (click)="selectLocation(location, 'shared-dropoff-specific')">
                                                        <span class="city-name">{{location}}</span>
                                                        <div style="font-size: 12px; color: #9ca3af; margin-top: 2px;">
                                                            {{selectedCities.shared.dropoff}}</div>
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Search button appears here when location details are visible (desktop only) -->
                                <button class="search-btn search-btn-below-locations" (click)="searchCabs('shared')"
                                    *ngIf="locationDetailsVisible['shared']" aria-label="Search shared cabs">
                                    <span>Search</span>
                                </button>

                                <div class="features">
                                    <div class="feature">
                                        <span class="feature-icon">üí∞</span>
                                        <span>Shared rides, shared costs</span>
                                    </div>
                                    <div class="feature">
                                        <span class="feature-icon">üåç</span>
                                        <span>Eco-friendly travel</span>
                                    </div>
                                    <div class="feature">
                                        <span class="feature-icon">üë•</span>
                                        <span>Meet fellow travelers</span>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                        <ng-container *ngSwitchCase="'flights'">
                            <!-- Flights tab content -->
                            <div class="booking-form tab-2 ">
                                <div class="trip-type">
                                    <button [class.active]="tripType === 'one-way'" (click)="setTripType('one-way')">One
                                        Way</button>
                                    <button [class.active]="tripType === 'round-trip'"
                                        (click)="setTripType('round-trip')">Round Trip</button>
                                    <button [class.active]="tripType === 'multi-city'"
                                        (click)="setTripType('multi-city')">Multi City</button>
                                </div>



                                <!-- STANDARD VIEW (One Way / Round Trip Grid) -->
                                <ng-container *ngIf="tripType !== 'multi-city'">
                                    <div class="multi-city-rows-wrapper" style="margin-top: 20px;">
                                        <div *ngFor="let route of flightRoutes; let i = index" class="standard-row-grid"
                                            [class.round-trip]="tripType === 'round-trip'"
                                            [class.one-way]="tripType === 'one-way'">

                                            <!-- COL 1: FROM -->
                                            <div class="grid-cell city-select">
                                                <label class="cell-label">FROM</label>
                                                <input type="text" class="grid-input-field"
                                                    [class.error]="isSameCitySelected(route.from, route.to)"
                                                    placeholder="Select City" [(ngModel)]="route.from"
                                                    (focus)="showCitySuggestionsOnFocus('flight-from-' + i)"
                                                    (input)="showCitySuggestions(route.from, 'flight-from-' + i)">

                                                <div class="input-subtext" *ngIf="route.from">{{route.from}}</div>
                                                <div class="input-subtext" *ngIf="!route.from">Start your journey</div>

                                                <!-- Suggestions -->
                                                <div class="city-suggestions"
                                                    [class.active]="getMultiCitySuggestions('flight-from-' + i).length > 0">
                                                    <div *ngFor="let city of getMultiCitySuggestions('flight-from-' + i)"
                                                        class="city-suggestion"
                                                        (click)="selectMultiCity(city.name, city.code, 'flight-from-' + i)">
                                                        <div class="city-suggestion-icon"><i
                                                                class="fas fa-plane-departure"></i></div>
                                                        <div class="city-suggestion-content">
                                                            <div class="city-suggestion-city-country">{{ city.name }}{{
                                                                city.country ? ', ' + city.country : '' }}</div>
                                                            <div class="city-suggestion-airport-name">{{
                                                                city.airportName }}</div>
                                                        </div>
                                                        <div class="city-suggestion-code" *ngIf="city.code">[ {{
                                                            city.code }} ]</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- SWAP BUTTON (Absolute) -->
                                            <button class="grid-swap-btn" (click)="swapFlightLocations(i)" title="Swap">
                                                <i class="fas fa-exchange-alt"></i>
                                            </button>

                                            <!-- COL 2: TO -->
                                            <div class="grid-cell city-select todest">
                                                <label class="cell-label">TO</label>
                                                <input type="text" class="grid-input-field"
                                                    [class.error]="isSameCitySelected(route.from, route.to)"
                                                    placeholder="Select City" [(ngModel)]="route.to"
                                                    (focus)="showCitySuggestionsOnFocus('flight-to-' + i)"
                                                    (input)="showCitySuggestions(route.to, 'flight-to-' + i)">

                                                <div class="input-subtext" *ngIf="route.to">{{route.to}}</div>
                                                <div class="input-subtext" *ngIf="!route.to">Choose destination</div>

                                                <!-- Suggestions -->
                                                <div class="city-suggestions"
                                                    [class.active]="getMultiCitySuggestions('flight-to-' + i).length > 0">
                                                    <div *ngFor="let city of getMultiCitySuggestions('flight-to-' + i)"
                                                        class="city-suggestion"
                                                        (click)="selectMultiCity(city.name, city.code, 'flight-to-' + i)">
                                                        <div class="city-suggestion-icon"><i
                                                                class="fas fa-plane-arrival"></i></div>
                                                        <div class="city-suggestion-content">
                                                            <div class="city-suggestion-city-country">{{ city.name }}{{
                                                                city.country ? ', ' + city.country : '' }}</div>
                                                            <div class="city-suggestion-airport-name">{{
                                                                city.airportName }}</div>
                                                        </div>
                                                        <div class="city-suggestion-code" *ngIf="city.code">[ {{
                                                            city.code }} ]</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- COL 3: DEPARTURE -->
                                            <div class="grid-cell">
                                                <label class="cell-label">DEPARTURE</label>
                                                <app-custom-calendar class="flights-calendar"
                                                    [selectedDate]="route.date" [minDate]="getTodayDate()"
                                                    [calendarFareMap]="calendarFareMap" placeholder="Date"
                                                    (dateSelected)="onFlightDepartureDateSelected($event, i)"
                                                    (calendarOpened)="onCalendarOpened('departure')"
                                                    (calendarClosed)="onCalendarClosed()">
                                                </app-custom-calendar>
                                                <div class="input-subtext">{{ route.date ? (route.date | date:'EEEE') :
                                                    'Select Date' }}</div>
                                            </div>

                                            <!-- COL 4: RETURN (Only for Round Trip) -->
                                            <div class="grid-cell" *ngIf="tripType === 'round-trip'">
                                                <label class="cell-label">RETURN</label>
                                                <app-custom-calendar class="flights-calendar"
                                                    [selectedDate]="formValues.flightReturn"
                                                    [minDate]="getReturnMinDate()"
                                                    [calendarFareMap]="calendarFareMapReturn" placeholder="Date"
                                                    (dateSelected)="onFlightReturnDateSelected($event)"
                                                    (calendarOpened)="onCalendarOpened('return')"
                                                    (calendarClosed)="onCalendarClosed()">
                                                </app-custom-calendar>
                                                <div class="input-subtext">{{ formValues.flightReturn ?
                                                    (formValues.flightReturn | date:'EEEE') : 'Select Date' }}</div>
                                                <div class="validation-error" *ngIf="returnDateError"
                                                    style="position:absolute; bottom:-18px; left:10px; font-size:10px; color:red;">
                                                    {{ returnDateError }}
                                                </div>
                                            </div>

                                            <!-- COL 5 (or 4): TRAVELLERS -->
                                            <div class="grid-cell travelers-dropdown">
                                                <label class="cell-label">TRAVELLERS & CLASS</label>
                                                <button class="grid-travelers-trigger" (click)="toggleTravelersPanel()">
                                                    <span class="travelers-main-text">{{counts.adults + counts.children
                                                        + counts.infants}} Traveller</span>
                                                    <span class="travelers-sub-text">{{selectedClass |
                                                        titlecase}}</span>
                                                </button>

                                                <!-- Travelers Panel Reuse -->
                                                <div class="grid-travelers-panel" [class.active]="isTravelersOpen"
                                                    (click)="$event.stopPropagation()">
                                                    <h3>Travellers</h3>
                                                    <!-- Adults -->
                                                    <div class="traveler-row">
                                                        <div class="traveler-info">
                                                            <h4>Adults</h4>
                                                            <p>12 yrs or above</p>
                                                        </div>
                                                        <div class="counter">
                                                            <button class="counter-btn"
                                                                [disabled]="!canDecrease('adults')"
                                                                [class.active]="counts.adults > 1"
                                                                (click)="updateCount('adults', -1)">-</button>
                                                            <span class="counter-value">{{counts.adults}}</span>
                                                            <button class="counter-btn"
                                                                (click)="updateCount('adults', 1)">+</button>
                                                        </div>
                                                    </div>
                                                    <!-- Children -->
                                                    <div class="traveler-row">
                                                        <div class="traveler-info">
                                                            <h4>Children</h4>
                                                            <p>2 - 12 yrs</p>
                                                        </div>
                                                        <div class="counter">
                                                            <button class="counter-btn"
                                                                [disabled]="!canDecrease('children')"
                                                                [class.active]="counts.children > 0"
                                                                (click)="updateCount('children', -1)">-</button>
                                                            <span class="counter-value">{{counts.children}}</span>
                                                            <button class="counter-btn"
                                                                (click)="updateCount('children', 1)">+</button>
                                                        </div>
                                                    </div>
                                                    <!-- Infants -->
                                                    <div class="traveler-row">
                                                        <div class="traveler-info">
                                                            <h4>Infants</h4>
                                                            <p>0 - 2 yrs</p>
                                                        </div>
                                                        <div class="counter">
                                                            <button class="counter-btn"
                                                                [disabled]="!canDecrease('infants')"
                                                                [class.active]="counts.infants > 0"
                                                                (click)="updateCount('infants', -1)">-</button>
                                                            <span class="counter-value">{{counts.infants}}</span>
                                                            <button class="counter-btn"
                                                                (click)="updateCount('infants', 1)">+</button>
                                                        </div>
                                                    </div>
                                                    <!-- Class -->
                                                    <div class="class-selection">
                                                        <h3>Class</h3>
                                                        <div class="class-options">
                                                            <button class="class-option"
                                                                [class.active]="selectedClass === 'economy'"
                                                                (click)="updateClass('economy')">Economy</button>
                                                            <button class="class-option"
                                                                [class.active]="selectedClass === 'business'"
                                                                (click)="updateClass('business')">Business</button>
                                                            <button class="class-option"
                                                                [class.active]="selectedClass === 'first'"
                                                                (click)="updateClass('first')">First</button>
                                                        </div>
                                                    </div>
                                                    <!-- Done -->
                                                    <div class="panel-actions">
                                                        <button class="done-btn"
                                                            (click)="closeTravelersPanel()">Done</button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="multi-city-compact-actions"
                                        style="justify-content: center; margin-top: 20px;">
                                        <button class="search-btn-compact" (click)="searchFlights()">
                                            Search
                                        </button>
                                    </div>
                                </ng-container>

                                <div class="multi-city-container" *ngIf="tripType === 'multi-city'">

                                    <!-- Rows Wrapper -->
                                    <div class="multi-city-rows-wrapper">
                                        <div *ngFor="let route of flightRoutes; let i = index"
                                            class="multi-city-row-grid">

                                            <!-- Remove Button (Absolute Position) -->
                                            <button class="remove-row-btn" *ngIf="flightRoutes.length > 2 && i > 1"
                                                (click)="removeFlightRoute(i)" title="Remove this route">
                                                <i class="fas fa-times"></i>
                                            </button>

                                            <!-- COL 1: FROM -->
                                            <div class="grid-cell city-select">
                                                <label class="cell-label">FROM</label>
                                                <input type="text" class="grid-input-field"
                                                    [class.error]="isSameCitySelected(route.from, route.to)"
                                                    placeholder="Select City" [(ngModel)]="route.from"
                                                    (focus)="showCitySuggestionsOnFocus('flight-from-' + i)"
                                                    (input)="showCitySuggestions(route.from, 'flight-from-' + i)">

                                                <div class="input-subtext" *ngIf="route.from">{{route.from}}</div>
                                                <div class="input-subtext" *ngIf="!route.from">Start your journey</div>

                                                <!-- Suggestions -->
                                                <div class="city-suggestions"
                                                    [class.active]="getMultiCitySuggestions('flight-from-' + i).length > 0">
                                                    <div *ngFor="let city of getMultiCitySuggestions('flight-from-' + i)"
                                                        class="city-suggestion"
                                                        (click)="selectMultiCity(city.name, city.code, 'flight-from-' + i)">
                                                        <div class="city-suggestion-icon"><i
                                                                class="fas fa-plane-departure"></i></div>
                                                        <div class="city-suggestion-content">
                                                            <div class="city-suggestion-city-country">{{ city.name }}{{
                                                                city.country ? ', ' + city.country : '' }}</div>
                                                            <div class="city-suggestion-airport-name">{{
                                                                city.airportName }}</div>
                                                        </div>
                                                        <div class="city-suggestion-code" *ngIf="city.code">[ {{
                                                            city.code }} ]</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- SWAP BUTTON (Absolute) -->
                                            <button class="grid-swap-btn" (click)="swapFlightLocations(i)" title="Swap">
                                                <i class="fas fa-exchange-alt"></i>
                                            </button>

                                            <!-- COL 2: TO -->
                                            <div class="grid-cell city-select todest">
                                                <label class="cell-label">TO</label>
                                                <input type="text" class="grid-input-field"
                                                    [class.error]="isSameCitySelected(route.from, route.to)"
                                                    placeholder="Select City" [(ngModel)]="route.to"
                                                    (focus)="showCitySuggestionsOnFocus('flight-to-' + i)"
                                                    (input)="showCitySuggestions(route.to, 'flight-to-' + i)">

                                                <div class="input-subtext" *ngIf="route.to">{{route.to}}</div>
                                                <div class="input-subtext" *ngIf="!route.to">Choose destination</div>

                                                <!-- Suggestions -->
                                                <div class="city-suggestions"
                                                    [class.active]="getMultiCitySuggestions('flight-to-' + i).length > 0">
                                                    <div *ngFor="let city of getMultiCitySuggestions('flight-to-' + i)"
                                                        class="city-suggestion"
                                                        (click)="selectMultiCity(city.name, city.code, 'flight-to-' + i)">
                                                        <div class="city-suggestion-icon"><i
                                                                class="fas fa-plane-arrival"></i></div>
                                                        <div class="city-suggestion-content">
                                                            <div class="city-suggestion-city-country">{{ city.name }}{{
                                                                city.country ? ', ' + city.country : '' }}</div>
                                                            <div class="city-suggestion-airport-name">{{
                                                                city.airportName }}</div>
                                                        </div>
                                                        <div class="city-suggestion-code" *ngIf="city.code">[ {{
                                                            city.code }} ]</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- COL 3: DEPARTURE -->
                                            <div class="grid-cell">
                                                <label class="cell-label">DEPARTURE</label>
                                                <app-custom-calendar class="flights-calendar"
                                                    [selectedDate]="route.date" [minDate]="getTodayDate()"
                                                    [calendarFareMap]="calendarFareMap" placeholder="Date"
                                                    (dateSelected)="onFlightDepartureDateSelected($event, i)"
                                                    (calendarOpened)="onCalendarOpened('departure')"
                                                    (calendarClosed)="onCalendarClosed()">
                                                </app-custom-calendar>
                                                <div class="input-subtext">{{ route.date ? (route.date | date:'EEEE') :
                                                    'Select Date' }}</div>
                                            </div>

                                            <!-- COL 4: CONDITIONAL CONTENT -->

                                            <!-- ROW 1: TRAVELLERS & CLASS -->
                                            <div class="grid-cell travelers-dropdown" *ngIf="i === 0">
                                                <label class="cell-label">TRAVELLERS & CLASS</label>
                                                <button class="grid-travelers-trigger" (click)="toggleTravelersPanel()">
                                                    <span class="travelers-main-text">{{counts.adults + counts.children
                                                        + counts.infants}} Traveller</span>
                                                    <span class="travelers-sub-text">{{selectedClass |
                                                        titlecase}}</span>
                                                </button>

                                                <!-- Travelers Panel Grid Version -->
                                                <div class="grid-travelers-panel" [class.active]="isTravelersOpen"
                                                    (click)="$event.stopPropagation()">
                                                    <h3>Travellers</h3>
                                                    <!-- Adults -->
                                                    <div class="traveler-row">
                                                        <div class="traveler-info">
                                                            <h4>Adults</h4>
                                                            <p>12 yrs or above</p>
                                                        </div>
                                                        <div class="counter">
                                                            <button class="counter-btn"
                                                                [disabled]="!canDecrease('adults')"
                                                                [class.active]="counts.adults > 1"
                                                                (click)="updateCount('adults', -1)">-</button>
                                                            <span class="counter-value">{{counts.adults}}</span>
                                                            <button class="counter-btn"
                                                                (click)="updateCount('adults', 1)">+</button>
                                                        </div>
                                                    </div>
                                                    <!-- Children -->
                                                    <div class="traveler-row">
                                                        <div class="traveler-info">
                                                            <h4>Children</h4>
                                                            <p>2 - 12 yrs</p>
                                                        </div>
                                                        <div class="counter">
                                                            <button class="counter-btn"
                                                                [disabled]="!canDecrease('children')"
                                                                [class.active]="counts.children > 0"
                                                                (click)="updateCount('children', -1)">-</button>
                                                            <span class="counter-value">{{counts.children}}</span>
                                                            <button class="counter-btn"
                                                                (click)="updateCount('children', 1)">+</button>
                                                        </div>
                                                    </div>
                                                    <!-- Infants -->
                                                    <div class="traveler-row">
                                                        <div class="traveler-info">
                                                            <h4>Infants</h4>
                                                            <p>0 - 2 yrs</p>
                                                        </div>
                                                        <div class="counter">
                                                            <button class="counter-btn"
                                                                [disabled]="!canDecrease('infants')"
                                                                [class.active]="counts.infants > 0"
                                                                (click)="updateCount('infants', -1)">-</button>
                                                            <span class="counter-value">{{counts.infants}}</span>
                                                            <button class="counter-btn"
                                                                (click)="updateCount('infants', 1)">+</button>
                                                        </div>
                                                    </div>
                                                    <!-- Class -->
                                                    <div class="class-selection">
                                                        <h3>Class</h3>
                                                        <div class="class-options">
                                                            <button class="class-option"
                                                                [class.active]="selectedClass === 'economy'"
                                                                (click)="updateClass('economy')">Economy</button>
                                                            <button class="class-option"
                                                                [class.active]="selectedClass === 'business'"
                                                                (click)="updateClass('business')">Business</button>
                                                            <button class="class-option"
                                                                [class.active]="selectedClass === 'first'"
                                                                (click)="updateClass('first')">First</button>
                                                        </div>
                                                    </div>
                                                    <!-- Done -->
                                                    <div class="panel-actions">
                                                        <button class="done-btn"
                                                            (click)="closeTravelersPanel()">Done</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- ROWS > 1: ADD CITY BUTTON (Last Row Only) -->
                                            <div class="grid-cell add-city-cell"
                                                *ngIf="i > 0 && i === flightRoutes.length - 1">
                                                <button class="add-city-btn" (click)="addFlightRoute()"
                                                    [disabled]="flightRoutes.length >= 6">
                                                    + ADD ANOTHER CITY
                                                </button>
                                            </div>
                                            <!-- ROWS > 1: EMPTY PLACEHOLDER if not last row -->
                                            <div class="grid-cell add-city-cell"
                                                *ngIf="i > 0 && i !== flightRoutes.length - 1">
                                                <!-- Empty -->
                                            </div>

                                        </div>
                                    </div>

                                    <div class="multi-city-compact-actions">
                                        <button class="search-btn-compact" (click)="searchFlights()">
                                            Search
                                        </button>
                                    </div>
                                </div>

                                <!-- Special Fares Section -->
                                <div class="special-fares-section">
                                    <label class="special-fares-label">Special Fares (Optional)</label>
                                    <div class="special-fares-buttons">
                                        <button class="special-fare-btn" [class.active]="fareType === 'student'"
                                            (click)="setFareType('student')" type="button">
                                            Student Fare
                                        </button>
                                        <button class="special-fare-btn" [class.active]="fareType === 'senior'"
                                            (click)="setFareType('senior')" type="button">
                                            Senior Citizen
                                        </button>
                                        <button class="special-fare-btn" [class.active]="fareType === 'armed'"
                                            (click)="setFareType('armed')" type="button">
                                            Armed Forces
                                        </button>
                                    </div>
                                </div>

                                <!-- <div class="features">
                                    <div class="feature">

                                        <span class="feature-icon">üõ°Ô∏è</span>
                                        <span>Priority customer service</span>

                                    </div>
                                    <div class="feature"> <span class="feature-icon">üí≥</span>
                                        <span>Lowest fare guaranteed</span>
                                    </div>
                                    <div class="feature"><span class="feature-icon">üìù</span>
                                        <span>Web Check In</span>
                                    </div>
                                </div> -->
                            </div>

                        </ng-container>

                        <ng-container *ngSwitchCase="'reserved-cabs'">
                            <!-- Reserved Cabs tab content -->
                            <div class="booking-form tab-3 shared-form-box">
                                <div class="cab-form-row reserved-form">
                                    <div class="form-group city-select">
                                        <label>From</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-location-dot input-icon"></i>
                                            <input type="text" class="form-input city-input" placeholder="Source"
                                                [(ngModel)]="formValues.reservedPickup"
                                                (focus)="showCitySuggestionsOnFocus('reserved-pickup')"
                                                (input)="showCitySuggestions(formValues.reservedPickup, 'reserved-pickup')">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="activeSuggestions['reserved-pickup'] && activeSuggestions['reserved-pickup'].length > 0">
                                            <ng-container *ngIf="isCityArray(activeSuggestions['reserved-pickup'])">
                                                <div *ngFor="let city of activeSuggestions['reserved-pickup']"
                                                    class="city-suggestion"
                                                    (click)="selectCity(city.name, city.code, 'reserved-pickup')">
                                                    <span class="city-name">{{city.name}}</span>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <button class="swap-btn" (click)="swapCabLocations('reserved')"
                                        aria-label="Swap pickup and dropoff locations">
                                        <span>‚áÑ</span>
                                    </button>

                                    <div class="form-group city-select">
                                        <label>To</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-location-dot input-icon"></i>
                                            <input type="text" class="form-input city-input" placeholder="Destination"
                                                [(ngModel)]="formValues.reservedDropoff"
                                                (focus)="showCitySuggestionsOnFocus('reserved-dropoff')"
                                                (input)="showCitySuggestions(formValues.reservedDropoff, 'reserved-dropoff')">
                                        </div>
                                        <div class="city-suggestions"
                                            [class.active]="activeSuggestions['reserved-dropoff'] && activeSuggestions['reserved-dropoff'].length > 0">
                                            <ng-container *ngIf="isCityArray(activeSuggestions['reserved-dropoff'])">
                                                <div *ngFor="let city of activeSuggestions['reserved-dropoff']"
                                                    class="city-suggestion"
                                                    (click)="selectCity(city.name, city.code, 'reserved-dropoff')">
                                                    <span class="city-name">{{city.name}}</span>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Date</label>
                                        <app-custom-calendar [selectedDate]="formValues.reservedDate"
                                            [minDate]="getTodayDate()" placeholder="Select Date"
                                            (dateSelected)="onReservedDateSelected($event)"
                                            (calendarOpened)="onCalendarOpened()" (calendarClosed)="onCalendarClosed()">
                                        </app-custom-calendar>
                                    </div>

                                    <div class="form-group">
                                        <label>Pickup Time</label>
                                        <div class="input-with-icon">
                                            <i class="fas fa-clock input-icon"></i>
                                            <input type="text" class="form-input time-input-display"
                                                [value]="formatTimeDisplay(formValues.reservedTime)"
                                                placeholder="Select Time" (click)="openTimePicker()" readonly>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Passengers <small>(Age 2yrs & above)</small></label>
                                        <div class="passenger-counter">
                                            <button class="counter-btn" [disabled]="formValues.reservedPassengers <= 1"
                                                (click)="updateReservedPassengers(-1)">-</button>
                                            <span class="counter-value">{{formValues.reservedPassengers}}</span>
                                            <button class="counter-btn" (click)="updateReservedPassengers(1)">+</button>
                                        </div>
                                    </div>

                                    <!-- Search button moved below based on location details visibility -->
                                    <button class="search-btn" (click)="searchCabs('reserved')"
                                        *ngIf="!locationDetailsVisible['reserved']" aria-label="Search reserved cabs">
                                        <span>Search</span>
                                    </button>
                                </div>

                                <div class="location-details" [class.active]="locationDetailsVisible['reserved']">
                                    <h3>üìç Specify Pickup & Drop-off Locations</h3>
                                    <div class="location-row">
                                        <div class="form-group">
                                            <label>Pickup Location</label>
                                            <div class="input-with-icon">
                                                <i class="fas fa-location-dot input-icon"></i>
                                                <input type="text" class="form-input"
                                                    placeholder="Enter specific pickup location"
                                                    [(ngModel)]="formValues.reservedPickupLocation">
                                            </div>
                                        </div>

                                        <!-- <button class="swap-btn" (click)="swapSpecificLocations('reserved')">
                                        <span>‚áÑ</span>
                                    </button> -->

                                        <div class="form-group">
                                            <label>Drop-off Location</label>
                                            <div class="input-with-icon">
                                                <i class="fas fa-location-dot input-icon"></i>
                                                <input type="text" class="form-input"
                                                    placeholder="Enter specific drop-off location"
                                                    [(ngModel)]="formValues.reservedDropoffLocation">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Search button appears here when location details are visible (desktop only) -->
                                <button class="search-btn search-btn-below-locations" (click)="searchCabs('reserved')"
                                    *ngIf="locationDetailsVisible['reserved']" aria-label="Search reserved cabs">
                                    <span>Search</span>
                                </button>

                                <div class="features">
                                    <div class="feature">
                                        <span class="feature-icon">‚è∞</span>
                                        <span>On-time guarantee</span>
                                    </div>
                                    <div class="feature">
                                        <span class="feature-icon">üõ°Ô∏è</span>
                                        <span>Verified drivers</span>
                                    </div>
                                    <div class="feature">
                                        <span class="feature-icon">üí≥</span>
                                        <span>Flexible payment options</span>
                                    </div>
                                </div>
                            </div>
                        </ng-container>


                    </ng-container>
                </div>

            </ng-container>
        </div>
    </div>
</div>
<!-- End of Booking Form and Navigation Section -->

<!-- Mobile App-Like Homepage (hidden on desktop, shown via media query) -->
<div class="wr-mobile-shell">
    <section class="wr-hero">
        <p class="wr-hero-sub">Airport connectivity ¬∑ Northeast India</p>
        <h1 class="wr-hero-title">Airport rides made effortless.</h1>
        <p class="wr-hero-sub">Shared, Reserved & Flights ‚Äî all in one smooth booking experience.</p>
    </section>

    <div class="wr-tabs-modern">
        <div class="wr-tab-indicator" [style.transform]="'translateX(' + (getMobileTabIndex(mobileTab) * 100) + '%)'">
        </div>
        <button class="wr-tab-modern" type="button" [class.wr-tab-modern--active]="mobileTab === 'shared'"
            (click)="setMobileTab('shared')">
            <span class="wr-tab-icon"><img src="assets/images/shared-removebg-preview.png" width="23"
                    alt="Wizzride shared cab service" /></span>
            <span>Shared</span>
        </button>
        <button class="wr-tab-modern" type="button" [class.wr-tab-modern--active]="mobileTab === 'reserved'"
            (click)="setMobileTab('reserved')">
            <span class="wr-tab-icon"><img src="assets/images/reserved.png" width="23"
                    alt="Wizzride reserved cab service" /></span>
            <span>Reserved</span>
        </button>
        <button class="wr-tab-modern" type="button" [class.wr-tab-modern--active]="mobileTab === 'flights'"
            (click)="setMobileTab('flights')">
            <span class="wr-tab-icon"><img src="assets/images/flight.png" width="23" alt="flight" /></span>
            <span>Flights</span>
        </button>
    </div>

    <section class="wr-card" id="wr-mobile-booking">

        <!-- Trip Type Tabs for Flights (Mobile) -->
        <div class="wr-trip-type-mobile" *ngIf="mobileTab === 'flights'">
            <button class="wr-trip-type-btn" [class.active]="tripType === 'one-way'" (click)="setTripType('one-way')">
                One Way
            </button>
            <button class="wr-trip-type-btn" [class.active]="tripType === 'round-trip'"
                (click)="setTripType('round-trip')">
                Round Trip
            </button>
            <button class="wr-trip-type-btn" [class.active]="tripType === 'multi-city'"
                (click)="setTripType('multi-city')">
                Multi City
            </button>
        </div>

        <div class="wr-route-row" *ngIf="mobileTab !== 'flights' || tripType !== 'multi-city'">
            <div class="wr-route-col" (click)="openMobileLocationPopup('from')">
                <div class="wr-field-label wr-field-label-left-pad">From</div>
                <div class="wr-route-city" *ngIf="getMobileCityCode('from')">{{ getMobileCityCode('from') }}</div>
                <div class="wr-route-code" *ngIf="getMobileCityName('from')">{{ getMobileCityName('from') }}</div>
                <div class="wr-route-code" *ngIf="!getMobileCityCode('from') && !getMobileCityName('from')"
                    style="color: #374151;">Select city</div>
            </div>

            <button class="wr-swap-btn" type="button" (click)="swapMobileLocations($event)" aria-label="Swap route">
                <svg class="wr-icon wr-icon--muted" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M7 7h11l-3-3"></path>
                    <path d="M17 17H6l3 3"></path>
                </svg>
            </button>

            <div class="wr-route-col" (click)="openMobileLocationPopup('to')">
                <div class="wr-field-label wr-field-label-left-pad">To</div>
                <div class="wr-route-city" *ngIf="getMobileCityCode('to')">{{ getMobileCityCode('to') }}</div>
                <div class="wr-route-code" *ngIf="getMobileCityName('to')">{{ getMobileCityName('to') }}</div>
                <div class="wr-route-code" *ngIf="!getMobileCityCode('to') && !getMobileCityName('to')"
                    style="color: #374151;">Select city</div>
            </div>
        </div>

        <div class="wr-divider" *ngIf="mobileTab !== 'flights' || tripType !== 'multi-city'"></div>

        <div class="wr-panel" [class.is-active]="mobileTab === 'shared'">

            <div class="wr-field-block" *ngIf="formValues.sharedPickup && formValues.sharedDropoff">
                <div class="wr-field-label">Pickup Point</div>
                <div class="wr-field-pill" (click)="openMobileLocationPopup('pickup')">
                    <svg class="wr-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 21s-6-4.35-6-10a6 6 0 0 1 12 0c0 5.65-6 10-6 10z"></path>
                        <circle cx="12" cy="11" r="2.5"></circle>
                    </svg>
                    <span>{{ formValues.sharedPickupLocation || 'Select pickup point' }}</span>
                </div>
            </div>

            <div class="wr-field-block" *ngIf="formValues.sharedPickup && formValues.sharedDropoff">
                <div class="wr-field-label">Drop Point</div>
                <div class="wr-field-pill" (click)="openMobileLocationPopup('dropoff')">
                    <svg class="wr-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 21s-6-4.35-6-10a6 6 0 0 1 12 0c0 5.65-6 10-6 10z"></path>
                        <circle cx="12" cy="11" r="2.5"></circle>
                    </svg>
                    <span>{{ formValues.sharedDropoffLocation || 'Select drop point' }}</span>
                </div>
            </div>

            <div class="wr-field-block wr-field-block--reserved-mobile">
                <div class="wr-field-label">Your Mobile Number</div>
                <div class="wr-field-pill wr-phone-wrapper">
                    <div class="wr-country-select" (click)="openMobileCountryPopup()">
                        <img [src]="'https://flagcdn.com/w20/' + getMobileFlagCode() + '.png'" class="wr-flag"
                            alt="Selected country flag">
                        <span class="wr-country-code">{{ selectedCountryCode }}</span>
                        <i class="fas fa-chevron-down" style="font-size: 10px; margin-left: 2px; color: #6b7280;"></i>
                    </div>
                    <input #phoneInputShared type="tel" class="wr-input" placeholder="Enter phone number"
                        [(ngModel)]="phoneNumber" maxlength="10" pattern="[0-9]{6,15}"
                        (focus)="openCustomKeypad(phoneInputShared, $event)"
                        (click)="openCustomKeypad(phoneInputShared, $event)" [readonly]="isMobileView()">
                </div>
            </div>

            <div class="wr-grid-2">
                <div class="wr-grid-2-col">
                    <div class="wr-field-label">Date of Travel</div>
                    <div class="wr-field-pill datecl" (click)="openMobileDatePicker('shared')">
                        <svg class="wr-icon" viewBox="0 0 24 24" aria-hidden="true">
                            <circle cx="12" cy="12" r="7"></circle>
                            <polyline points="12 8 12 12 15 13.5"></polyline>
                        </svg>
                        <span class="datecltext">{{ getMobileDateDisplay(formValues.sharedDateTime) || 'Select date'
                            }}</span>
                    </div>
                </div>

                <div class="wr-grid-2-col">
                    <div class="wr-field-label">Passengers <small>(Age 2yrs & above)</small></div>
                    <div class="wr-counter" data-counter="sharedPassengers">
                        <button data-action="minus" [disabled]="getMobilePassengers() <= 1"
                            (click)="updateMobilePassengers(-1)">‚àí</button>
                        <span class="wr-counter-value">{{ getMobilePassengers() }}</span>
                        <button data-action="plus" (click)="updateMobilePassengers(1)">+</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="wr-panel" [class.is-active]="mobileTab === 'reserved'">
            <div class="wr-field-block">
                <div class="wr-field-label">Pickup Time</div>
                <div class="wr-field-pill datecl" (click)="openTimePicker()">
                    <svg class="wr-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <circle cx="12" cy="12" r="7"></circle>
                        <polyline points="12 8 12 12 15 13.5"></polyline>
                    </svg>
                    <span class="datecltext">{{ formatTimeDisplay(formValues.reservedTime) || '12:00 PM' }}</span>
                </div>
            </div>
            <div class="wr-field-block">
                <div class="wr-field-label">Your Mobile Number</div>
                <div class="wr-field-pill wr-phone-wrapper">
                    <div class="wr-country-select" (click)="openMobileCountryPopup()">
                        <img [src]="'https://flagcdn.com/w20/' + getMobileFlagCode() + '.png'" class="wr-flag"
                            alt="Selected country flag">
                        <span class="wr-country-code">{{ selectedCountryCode }}</span>
                        <i class="fas fa-chevron-down" style="font-size: 10px; margin-left: 2px; color: #6b7280;"></i>
                    </div>
                    <input #phoneInputReserved type="tel" class="wr-input" placeholder="Enter phone number"
                        [(ngModel)]="phoneNumber" maxlength="10" pattern="[0-9]{6,15}"
                        (focus)="openCustomKeypad(phoneInputReserved, $event)"
                        (click)="openCustomKeypad(phoneInputReserved, $event)" [readonly]="isMobileView()">
                </div>
            </div>

            <div class="wr-grid-2">
                <div class="wr-grid-2-col">
                    <div class="wr-field-label">Date</div>
                    <div class="wr-field-pill datecl" (click)="openMobileDatePicker('reserved')">
                        <svg class="wr-icon" viewBox="0 0 24 24" aria-hidden="true">
                            <circle cx="12" cy="12" r="7"></circle>
                            <polyline points="12 8 12 12 15 13.5"></polyline>
                        </svg>
                        <span class="datecltext">{{ getMobileDateDisplay(formValues.reservedDate) || 'Select date'
                            }}</span>
                    </div>
                </div>

                <div class="wr-grid-2-col">
                    <div class="wr-field-label">Passengers <small>(Age 2yrs & above)</small></div>
                    <div class="wr-counter" data-counter="reservedPassengers">
                        <button data-action="minus" [disabled]="getMobilePassengers() <= 1"
                            (click)="updateMobilePassengers(-1)">‚àí</button>
                        <span class="wr-counter-value">{{ getMobilePassengers() }}</span>
                        <button data-action="plus" (click)="updateMobilePassengers(1)">+</button>
                    </div>
                </div>
            </div>



            <div class="wr-field-block" *ngIf="formValues.reservedPickup && formValues.reservedDropoff"
                style="margin-top: 16px;">
                <div class="wr-field-label">Pickup Point</div>
                <div class="wr-field-pill wr-field-pill--input">
                    <input type="text" class="wr-input" placeholder="Enter specific pickup point"
                        [(ngModel)]="formValues.reservedPickupLocation" />
                </div>
            </div>

            <div class="wr-field-block" *ngIf="formValues.reservedPickup && formValues.reservedDropoff">
                <div class="wr-field-label">Drop Point</div>
                <div class="wr-field-pill wr-field-pill--input">
                    <input type="text" class="wr-input" placeholder="Enter specific drop point"
                        [(ngModel)]="formValues.reservedDropoffLocation" />
                </div>
            </div>
        </div>

        <div class="wr-panel" [class.is-active]="mobileTab === 'flights'">
            <!-- Multi-City Routes Inline Form -->
            <ng-container *ngIf="tripType === 'multi-city'">
                <div *ngFor="let route of flightRoutes; let i = index" style="margin-bottom: 16px; position: relative;">
                    <div class="wr-route-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <span style="font-weight: 600; color: #1f2937; font-size: 14px;">Route {{ i + 1 }}</span>
                        <button *ngIf="flightRoutes.length > 1"
                            style="background: transparent; border: none; font-size: 18px; color: #ef4444; padding: 4px 8px; cursor: pointer;"
                            (click)="removeFlightRoute(i); $event.stopPropagation()" type="button"
                            aria-label="Remove this route">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>

                    <div class="wr-route-row" style="margin-bottom: 12px;">
                        <div class="wr-route-col" (click)="openMobileMultiCityLocationPopupDirect('from', i)">
                            <div class="wr-field-label wr-field-label-left-pad">From</div>
                            <ng-container *ngIf="route.from">
                                <div class="wr-route-city">{{ getCityCodeFromDisplay(route.from) }}</div>
                                <div class="wr-route-code">{{ getCityNameFromDisplay(route.from) }}</div>
                            </ng-container>
                            <div class="wr-route-code" *ngIf="!route.from" style="color: #374151;">Select city</div>
                        </div>

                        <div class="wr-route-col" (click)="openMobileMultiCityLocationPopupDirect('to', i)">
                            <div class="wr-field-label wr-field-label-left-pad">To</div>
                            <ng-container *ngIf="route.to">
                                <div class="wr-route-city">{{ getCityCodeFromDisplay(route.to) }}</div>
                                <div class="wr-route-code">{{ getCityNameFromDisplay(route.to) }}</div>
                            </ng-container>
                            <div class="wr-route-code" *ngIf="!route.to" style="color: #374151;">Select city</div>
                        </div>
                    </div>

                    <div class="wr-field-block" style="margin-top: 12px; margin-bottom: 0;">
                        <div class="wr-field-label">Departure Date</div>
                        <div class="wr-field-pill" (click)="openMobileMultiCityDatePicker(i)">
                            <svg class="wr-icon" viewBox="0 0 24 24" aria-hidden="true">
                                <circle cx="12" cy="12" r="7"></circle>
                                <polyline points="12 8 12 12 15 13.5"></polyline>
                            </svg>
                            <span *ngIf="route.date">{{ route.date | date:'d MMM' }} {{ route.date | date:'EEE'
                                }}</span>
                            <span *ngIf="!route.date" style="color: #9ca3af;">Select date</span>
                        </div>
                    </div>
                </div>

                <div class="wr-field-block" style="margin-top: 8px;">
                    <button
                        style="width: 100%; padding: 12px; background: #fff; border: 1px dashed #ddd; border-radius: 8px; color: #666; font-size: 14px; cursor: pointer;"
                        [disabled]="flightRoutes.length >= 5" (click)="addFlightRoute()" type="button">
                        + ADD CITY
                    </button>
                </div>
            </ng-container>

            <div class="wr-field-block" *ngIf="tripType !== 'multi-city'">
                <div class="wr-field-label">Departure Date</div>
                <div class="wr-field-pill" (click)="openMobileDatePicker('flights')">
                    <svg class="wr-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <circle cx="12" cy="12" r="7"></circle>
                        <polyline points="12 8 12 12 15 13.5"></polyline>
                    </svg>
                    <span>{{ getMobileDateDisplay(flightRoutes[0].date || formValues.flightDeparture) || 'Select date'
                        }}</span>
                </div>
            </div>

            <!-- Return Date Field (only for round-trip) -->
            <div class="wr-field-block" *ngIf="tripType === 'round-trip'">
                <div class="wr-field-label">Return Date</div>
                <div class="wr-field-pill" (click)="openMobileReturnDatePicker()">
                    <svg class="wr-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <circle cx="12" cy="12" r="7"></circle>
                        <polyline points="12 8 12 12 15 13.5"></polyline>
                    </svg>
                    <span>{{ getMobileDateDisplay(formValues.flightReturn) || 'Select return date' }}</span>
                </div>
                <div class="validation-error" *ngIf="returnDateError"
                    style="margin-top: 8px; color: #ef4444; font-size: 12px;">
                    {{ returnDateError }}
                </div>
            </div>

            <div class="wr-field-block">
                <div class="wr-field-label">Travellers & Class</div>
                <div class="wr-field-pill" (click)="openMobileTravelersPopup()">
                    <svg class="wr-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>{{ getMobileTravelersText() }}</span>
                </div>
            </div>

            <div class="wr-field-block">
                <div class="wr-field-label">Your Mobile Number</div>
                <div class="wr-field-pill wr-phone-wrapper">
                    <div class="wr-country-select" (click)="openMobileCountryPopup()">
                        <img [src]="'https://flagcdn.com/w20/' + getMobileFlagCode() + '.png'" class="wr-flag"
                            alt="Selected country flag">
                        <span class="wr-country-code">{{ selectedCountryCode }}</span>
                        <i class="fas fa-chevron-down" style="font-size: 10px; margin-left: 2px; color: #6b7280;"></i>
                    </div>
                    <input #phoneInputFlights type="tel" class="wr-input" placeholder="Enter phone number"
                        [(ngModel)]="phoneNumber" maxlength="10" pattern="[0-9]{6,15}"
                        (focus)="openCustomKeypad(phoneInputFlights, $event)"
                        (click)="openCustomKeypad(phoneInputFlights, $event)" [readonly]="isMobileView()">
                </div>
            </div>

            <!-- Special Fares Section (Mobile) -->
            <div class="wr-field-block wr-special-fares-mobile">
                <div class="wr-field-label">Special Fares (Optional)</div>
                <div class="wr-special-fares-buttons">
                    <button class="wr-special-fare-btn" [class.active]="fareType === 'student'"
                        (click)="setFareType('student')" type="button">
                        Student Fare
                    </button>
                    <button class="wr-special-fare-btn" [class.active]="fareType === 'senior'"
                        (click)="setFareType('senior')" type="button">
                        Senior Citizen
                    </button>
                    <button class="wr-special-fare-btn" [class.active]="fareType === 'armed'"
                        (click)="setFareType('armed')" type="button">
                        Armed Forces
                    </button>
                </div>
            </div>
        </div>

        <div class="wr-divider"></div>

        <button class="wr-primary-btn" (click)="onMobileSearch()">{{ mobileTab === 'flights' ? 'Search Flight' : 'Search
            Ride' }}</button>
    </section>

    <section class="wr-offer-section">
        <div class="wr-offer-header">
            <div class="wr-section-title">{{ specialOffersSection.heading }}</div>
        </div>
        <div class="wr-offer-scroller">
            <button class="wr-offer-card" *ngFor="let offer of infiniteOffers">
                <div class="wr-offer-media">
                    <img class="wr-offer-img" [src]="offer.image" [alt]="offer.title">

                    <div class="wr-offer-ribbon" *ngIf="offer.code">Use Code: {{offer.code}}</div>
                </div>
                <div class="wr-offer-content">
                    <div class="wr-offer-title">{{offer.title}}</div>
                    <div class="wr-offer-sub" *ngIf="offer.subtitle">{{offer.subtitle}}</div>
                    <div class="wr-offer-desc">{{offer.description}}</div>
                </div>
            </button>
        </div>
    </section>

    <section class="wr-routes-section">
        <div class="wr-routes-header">
            <div class="wr-section-title">Popular Routes</div>
        </div>
        <div class="wr-routes-scroller">
            <div class="wr-route-card">
                <img src="assets/images/854878.png" alt="routeicon" class="wr-route-icon-img" />
                <div>
                    <div class="wr-route-main">Bagdogra ‚Üî Gangtok</div>
                    <div class="wr-route-sub">Most booked</div>
                </div>
                <div class="wr-route-info-row">
                    <span>123 km</span>
                    <span>4 hr</span>
                </div>
            </div>
            <div class="wr-route-card">
                <img src="assets/images/854878.png" alt="routeicon" class="wr-route-icon-img" />
                <div>
                    <div class="wr-route-main">Guwahati ‚Üî Shillong</div>
                    <div class="wr-route-sub">Most booked</div>
                </div>
                <div class="wr-route-info-row">
                    <span>99 km</span>
                    <span>2.5 hr</span>
                </div>
            </div>
        </div>
    </section>

    <section class="wr-stats-section">
        <div class="wr-section-title">Our Numbers Say It All</div>
        <div class="wr-stats-grid">
            <div class="wr-stat-card" *ngFor="let stat of numbersSectionStats">
                <div class="wr-stat-icon">
                    <img [src]="stat.icon" [alt]="stat.label">
                </div>
                <div class="wr-stat-number">{{ stat.number }}</div>
                <div class="wr-stat-label">{{ stat.label }}</div>
                <div class="wr-stat-desc">{{ stat.description }}</div>
            </div>
        </div>
    </section>

    <section class="wr-app-download">
        <div class="wr-app-card">
            <div class="wr-app-tag">
                <span class="wr-app-tag-dot"></span>
                <span>Try on mobile</span>
            </div>
            <h2 class="wr-app-title">Life's much easier on the <span class="highlight">App.</span></h2>
            <p class="wr-app-subtitle">Download the <span class="brand">WizzRide App</span> today for seamless travel
                booking.</p>
            <div class="wr-app-download-row">
                <div class="wr-app-qr-box">
                    <div class="wr-app-qr">
                        <img src="assets/images/qrframe.png" alt="WizzRide App QR">
                    </div>
                    <span class="wr-app-scan-text">Scan Me</span>
                </div>
                <div class="wr-app-store-buttons">
                    <a href="https://onelink.to/7q5zcj" target="_blank" rel="noopener" class="wr-store-btn"
                        aria-label="Download WizzRide App on Google Play Store">
                        <div class="wr-store-icon">‚ñ∂</div>
                        <div class="wr-store-text">
                            <small>Get it on</small>
                            <strong>Google Play</strong>
                        </div>
                    </a>
                    <a href="https://onelink.to/7q5zcj" target="_blank" rel="noopener"
                        class="wr-store-btn wr-store-btn--light" aria-label="Download WizzRide App on Apple App Store">
                        <div class="wr-store-icon"><i class="fab fa-apple"></i></div>
                        <div class="wr-store-text">
                            <small>Download on the</small>
                            <strong>App Store</strong>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <section class="wr-testimonials-section">
        <div class="wr-testimonials-header">
            <div class="wr-section-title">What Our Customers Say</div>
            <p class="wr-testimonials-subtitle">Hear from our satisfied customers about their amazing travel experiences
            </p>
        </div>
        <div class="wr-testimonials-scroller">
            <div class="wr-testimonial-card" *ngFor="let testimonial of testimonials; trackBy: trackByTestimonial">
                <div class="wr-testimonial-content">
                    <img src="https://i.ibb.co/ZcNh6FY/download.png" alt="Quote icon" class="wr-testimonial-quote">
                    <p class="wr-testimonial-text" [class.expanded]="isTestimonialExpanded(testimonial.id)">
                        <span *ngIf="!isTestimonialExpanded(testimonial.id) && shouldShowReadMore(testimonial.text)">
                            {{ getTruncatedText(testimonial.text) }}
                        </span>
                        <span *ngIf="isTestimonialExpanded(testimonial.id) || !shouldShowReadMore(testimonial.text)">
                            {{ testimonial.text }}
                        </span>
                    </p>
                    <button class="wr-read-more-btn" *ngIf="shouldShowReadMore(testimonial.text)"
                        (click)="toggleTestimonial(testimonial.id); $event.stopPropagation()">
                        {{ isTestimonialExpanded(testimonial.id) ? 'Read Less' : 'Read More' }}
                    </button>
                    <div class="wr-testimonial-author">
                        <div class="wr-testimonial-avatar">
                            <img [src]="testimonial.avatar" [alt]="testimonial.name" />
                        </div>
                        <div class="wr-testimonial-author-info">
                            <div class="wr-testimonial-name">{{ testimonial.name }}</div>
                            <div class="wr-testimonial-rating" *ngIf="testimonial.rating">
                                <span *ngFor="let star of [1,2,3,4,5]" class="wr-star"
                                    [class.active]="star <= testimonial.rating">‚òÖ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Special Offers and Content Sections -->
<div class="content-sections-wrapper">
    <!-- Shared Cabs Special Offers -->
    <section class="special-offers-section" *ngIf="currentTab === 'shared-cabs'">
        <div class="special-offers-content">
            <div class="offers-header">
                <h2>{{ specialOffersSection.heading }}</h2>
                <p>{{ specialOffersSection.description }}</p>
            </div>

            <div class="offers-slider-container">
                <div class="offers-slider-track">
                    <div *ngFor="let offer of infiniteOffers; trackBy: trackByOfferId" class="offer-card">
                        <div class="offer-card-inner">
                            <!-- Top - Image Section -->
                            <div class="offer-image-section">
                                <div class="offer-image" [style.background-image]="'url(' + offer.image + ')'">
                                </div>
                            </div>

                            <!-- Bottom - Content Section -->
                            <div class="offer-content">
                                <h3 class="offer-title">{{ offer.title }}</h3>
                                <p class="offer-description">{{ offer.description }}</p>
                                <p class="offer-subtitle">{{ offer.subtitle }}</p>

                                <div class="offer-code-section">
                                    <span class="offer-code-label">Use Code</span>
                                    <span class="offer-code">{{ offer.code }}</span>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Shared Cabs Content Section -->
    <div class="content-section" *ngIf="currentTab === 'shared-cabs'">
        <h2>Affordable Shared Cab Services</h2>
        <div class="content-grid">
            <div class="content-card">
                <h3><i class="fas fa-users card-icon"></i>Share & Save</h3>
                <p>Split the ride cost with fellow travelers going in the same direction. Our
                    shared
                    cab service
                    offers
                    significant savings while maintaining comfort and safety standards.</p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-route card-icon"></i>Optimized Routes</h3>
                <p>Our intelligent routing system ensures the most efficient pickup and drop-off
                    sequence,
                    minimizing
                    travel time while maximizing convenience for all passengers.</p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-leaf card-icon"></i>Eco-Friendly Travel</h3>
                <p>Reduce your carbon footprint by sharing rides. Every shared journey helps
                    decrease traffic
                    congestion
                    and environmental impact while supporting sustainable transportation.</p>
            </div>
        </div>
        <div class="highlight-stats">
            <div class="stat" *ngFor="let stat of sharedCabsStats">
                <span class="stat-number">{{ stat.number }}</span>
                <span class="stat-label">{{ stat.label }}</span>
            </div>
        </div>
    </div>

    <!-- Flights Special Offers -->
    <section class="special-offers-section" *ngIf="currentTab === 'flights'">
        <div class="offers-header">
            <h2>{{ specialOffersSection.heading }}</h2>
            <p>{{ specialOffersSection.description }}</p>
        </div>

        <div class="offers-slider-container">
            <div class="offers-slider-track">
                <div *ngFor="let offer of infiniteOffers; trackBy: trackByOfferId" class="offer-card">
                    <div class="offer-card-inner">
                        <!-- Top - Image Section -->
                        <div class="offer-image-section">
                            <div class="offer-image" [style.background-image]="'url(' + offer.image + ')'">
                            </div>
                            <div class="offer-subtitle-under-image">{{ offer.subtitle }}</div>
                        </div>

                        <!-- Bottom - Content Section -->
                        <div class="offer-content">
                            <h3 class="offer-title">{{ offer.title }}</h3>
                            <p class="offer-description">{{ offer.description }}</p>

                            <div class="offer-code-section">
                                <span class="offer-code-label">Use Code</span>
                                <span class="offer-code">{{ offer.code }}</span>
                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Flight Content Section -->
    <div class="content-section" *ngIf="currentTab === 'flights'">
        <h2>Why Choose Our Flight Booking Service?</h2>
        <div class="content-grid">
            <div class="content-card">
                <h3><i class="fas fa-plane-departure card-icon"></i>Best Flight Deals</h3>
                <p>Compare prices from multiple airlines and get the best deals on domestic and
                    international
                    flights. Our smart algorithm finds you the most affordable options without
                    compromising on
                    quality.</p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-shield-alt card-icon"></i>Secure Booking</h3>
                <p>Your transactions are protected with bank-level security. We use advanced
                    encryption to
                    ensure your personal and payment information remains safe throughout the
                    booking
                    process.
                </p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-headset card-icon"></i>24/7 Support</h3>
                <p>Our dedicated customer support team is available round-the-clock to assist
                    you
                    with booking
                    queries, changes, or any travel-related concerns you might have.</p>
            </div>
        </div>
        <div class="highlight-stats">
            <div class="stat">
                <span class="stat-number">1M+</span>
                <span class="stat-label">Happy Customers</span>
            </div>
            <div class="stat">
                <span class="stat-number">500+</span>
                <span class="stat-label">Airlines Partners</span>
            </div>
            <div class="stat">
                <span class="stat-number">99.9%</span>
                <span class="stat-label">Booking Success Rate</span>
            </div>
            <div class="stat">
                <span class="stat-number">24/7</span>
                <span class="stat-label">Customer Support</span>
            </div>
        </div>
    </div>

    <!-- Reserved Cabs Special Offers -->
    <section class="special-offers-section" *ngIf="currentTab === 'reserved-cabs'">
        <div class="offers-header">
            <h2>{{ specialOffersSection.heading }}</h2>
            <p>{{ specialOffersSection.description }}</p>
        </div>

        <div class="offers-slider-container">
            <div class="offers-slider-track">
                <div *ngFor="let offer of infiniteOffers; trackBy: trackByOfferId" class="offer-card">
                    <div class="offer-card-inner">
                        <!-- Top - Image Section -->
                        <div class="offer-image-section">
                            <div class="offer-image" [style.background-image]="'url(' + offer.image + ')'">
                            </div>
                        </div>

                        <!-- Bottom - Content Section -->
                        <div class="offer-content">
                            <h3 class="offer-title">{{ offer.title }}</h3>
                            <p class="offer-description">{{ offer.description }}</p>
                            <p class="offer-subtitle">{{ offer.subtitle }}</p>

                            <div class="offer-code-section">
                                <span class="offer-code-label">Use Code</span>
                                <span class="offer-code">{{ offer.code }}</span>
                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Reserved Cabs Content Section -->
    <div class="content-section" *ngIf="currentTab === 'reserved-cabs'">
        <h2>Premium Reserved Cab Experience</h2>
        <div class="content-grid">
            <div class="content-card">
                <h3><i class="fas fa-crown card-icon"></i>Exclusive & Private</h3>
                <p>Enjoy your own private vehicle with no sharing required. Perfect for business
                    trips, family
                    outings,
                    or when you need complete privacy and comfort during your journey.</p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-user-tie card-icon"></i>Professional Drivers</h3>
                <p>All our drivers are thoroughly vetted, professionally trained, and maintain
                    high
                    standards of
                    courtesy and service. Experience smooth, safe, and reliable transportation.
                </p>
            </div>
            <div class="content-card">
                <h3><i class="fas fa-car-side card-icon"></i>Premium Fleet</h3>
                <p>Choose from our wide range of well-maintained vehicles including hatchbacks,
                    sedans, SUVs, and
                    luxury
                    cars. All vehicles are regularly serviced and sanitized.</p>
            </div>
        </div>
        <div class="highlight-stats">
            <div class="stat" *ngFor="let stat of reservedCabsStats">
                <span class="stat-number">{{ stat.number }}</span>
                <span class="stat-label">{{ stat.label }}</span>
            </div>
        </div>
    </div>
</div>
<!-- End of Special Offers and Content Sections -->

<!-- Mobile Bottom Navigation -->
<!-- <div class="mobile-bottom-nav" [class.visible]="showMobileBottomNav">
    <button *ngFor="let tab of tabs" class="mobile-nav-tab" [class.active]="currentTab === tab"
        (click)="switchTab(tab)">
        <span class="mobile-icon" *ngIf="tab === 'shared-cabs'">
            <img src="assets/images/shared-removebg-preview.png" alt="shared"/>
        </span>
        <span class="mobile-icon" *ngIf="tab === 'reserved-cabs'">
            <img src="assets/images/reserved.png" alt="reserved" />
        </span>
        <span class="mobile-icon" *ngIf="tab === 'flights'">
            <img src="assets/images/flight.png" alt="flight" />
        </span>
        <span class="mobile-label">{{ tab === 'shared-cabs' ? 'Shared' : tab === 'reserved-cabs' ? 'Reserve' : 'Flights' }}</span>
    </button>
    <button class="mobile-nav-tab" (click)="scrollToContact()">
        <span class="mobile-icon">
            <i class="fas fa-phone"></i>
        </span>
        <span class="mobile-label">Contact</span>
    </button>
</div> -->

<!-- Sliding Functionality Section -->
<div class="sliding-section-wrapper">
    <section class="services-slider-section">
        <div class="services-header">
            <h2>Our Services</h2>
            <p>Discover our comprehensive range of travel solutions designed to make your journey
                seamless and memorable</p>
        </div>

        <div class="services-slider-container">
            <div class="services-slider-track">
                <div *ngFor="let service of infiniteServices; trackBy: trackByServiceId" class="service-card">
                    <div class="service-card-inner">
                        <div class="service-image-container">
                            <div class="service-image" [style.background-image]="'url(' + service.image + ')'">
                                <div class="service-overlay"></div>

                            </div>
                        </div>

                        <div class="service-content">
                            <h3 class="service-title">{{ service.title }}</h3>
                            <p class="service-description">{{ service.description }}</p>
                            <a [href]="service.link" [attr.aria-label]="'Learn More about ' + service.title"
                                class="service-cta-btn">
                                <span class="visually-hidden">{{ service.title }}</span>
                                <span aria-hidden="true">Learn More</span>

                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<!-- End of Sliding Functionality Section -->

<!-- <img src="../../assets/images/banner.jpeg" alt="banner" class="bannerbet"/> -->
<section class="airport-connectivity-section">
    <div class="connectivity-container">
        <div class="connectivity-content">
            <h1>Expert in Airport Connectivity</h1>
            <p class="subtitle">Reliable Shared Cabs from Bagdogra, Guwahati, Sikkim, Shillong & Tezpur</p>

            <h2 class="travel-solution-title">We Offer Seamless Travel solution</h2>

            <ul class="connectivity-links">
                <li><a href="https://wizzride.com/ourservices/Luxury-Shared-Cabs/Bagdogra_Airport_To_Darjeeling_Shared_Cab_Service/"
                        aria-label="Book Shared Cab from Bagdogra Airport to Darjeeling">Bagdogra
                        Airport to Darjeeling</a></li>
                <li><a href="https://wizzride.com/ourservices/Luxury-Shared-Cabs/Bagdogra%20Airport%20to%20Gangtok%20-%20Shared%20Cab%20Service/"
                        aria-label="Book Shared Cab from Bagdogra Airport to Gangtok">Bagdogra
                        Airport to Gangtok</a></li>
                <li><a href="https://wizzride.com/ourservices/Luxury-Shared-Cabs/Bagdogra_Airport_To_Kalimpong_Shared_Cab_Service/"
                        aria-label="Book Shared Cab from Bagdogra Airport to Kalimpong">Bagdogra
                        Airport to Kalimpong</a></li>
                <li><a href="https://wizzride.com/ourservices/Luxury-Shared-Cabs/guwahati-to-shillong/"
                        aria-label="Book Shared Cab from Guwahati Airport to Shillong and Tezpur">Guwahati
                        Airport to Shillong and Tezpur Transfers</a></li>
            </ul>

            <div class="service-description">
                <p>Easy trips from Bagdogra Airport to Sikkim or Kalimpoong to Bagdogra Airport, or Guwahati
                    Airport to Shillong, Guwahati Airport to Tezpur, WizzRide ensures reliable service</p>
            </div>

            <p class="cta-text">Start your journey with confidence and <span class="cta-highlight">book your
                    WizzRide cab today</span> for a seamless travel experience!</p>
        </div>

        <div class="connectivity-illustration">
            <img src="assets/images/illustration1.f909f03abb56d801.svg" alt="Travel Illustration">
        </div>
    </div>
</section>


<section class="app-download-section">
    <div class="app-download-container">
        <!-- Left Side - Phone Mockup with Features -->
        <div class="phone-mockup-section">
            <div class="feature-bullets">
                <div class="feature-item">
                    <div class="feature-bullet"></div>
                    <span class="feature-text">Data Privacy,<br>Safety & Security</span>
                </div>
                <div class="feature-item">
                    <div class="feature-bullet"></div>
                    <span class="feature-text">Important & Useful<br>Latest In-App features</span>
                </div>
                <div class="feature-item">
                    <div class="feature-bullet"></div>
                    <span class="feature-text">Never miss Important<br>Notifications & Updates</span>
                </div>
                <div class="feature-item">
                    <div class="feature-bullet"></div>
                    <span class="feature-text">Seamless User Experience<br>through Latest Technology</span>
                </div>
            </div>

            <div class="phone-mockup">
                <img src="assets/images/phonemockup.png" alt="WizzRide App Interface">
            </div>
        </div>

        <!-- Right Side - Content -->
        <div class="app-content">
            <span class="section-tag">Try On Mobile</span>

            <h2>Life's much easier on the <span class="highlight">App.</span></h2>

            <p class="subtitle">Download the <span class="brand">WizzRide App</span> today for
                <strong>seamless
                    travel booking</strong> and a <strong>smarter travel experience.</strong>
            </p>

            <div class="download-section">


                <div class="download-cta">
                    <div class="qr-code-container">
                        <div class="qr-code">
                            <img src="assets/images/qrframe.png" alt="wizrideappqr" />
                        </div>
                        <span class="scan-text">Scan Me</span>
                    </div>

                    <div class="store-buttons">
                        <a href="https://onelink.to/7q5zcj" target="_blank" class="store-btn"
                            aria-label="Download WizzRide App on Google Play Store">
                            <i class="fab fa-google-play"></i>
                            <div class="store-btn-text">
                                <small>Get it on</small>
                                <strong>Google Play</strong>
                            </div>
                        </a>
                        <a href="https://onelink.to/7q5zcj" target="_blank" class="store-btn"
                            aria-label="Download WizzRide App on Apple App Store">
                            <i class="fab fa-apple"></i>
                            <div class="store-btn-text">
                                <small>Download on the</small>
                                <strong>App Store</strong>
                            </div>
                        </a>
                    </div>
                </div>
            </div>


        </div>
    </div>
</section>

<section class="statistics-section">
    <div class="statistics-header">
        <h2>Our Numbers Say It All</h2>
    </div>

    <div class="statistics-grid">
        <div class="stat-card" *ngFor="let stat of numbersSectionStats; let i = index">
            <div class="stat-icon" [style.--delay]="i + 1">
                <img [src]="stat.icon" [alt]="stat.label">
            </div>
            <span class="stat-number" data-animate>{{ stat.number }}</span>
            <div class="stat-label">{{ stat.label }}</div>
            <div class="stat-description">{{ stat.description }}</div>
        </div>
    </div>
</section>




<section class="testimonials-section">
    <div class="services-header">
        <h2>What Our Customers Say</h2>
        <p>Hear from our satisfied customers about their amazing travel experiences with WizzRide</p>
    </div>

    <div class="sectnew">
        <div class="slider-container" #testimonialSwiper (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()"
            (touchstart)="onTouchStart($event)" (touchend)="onTouchEnd($event)" (mousedown)="onMouseDown($event)"
            (mousemove)="onMouseMove($event)" (mouseup)="onMouseUp($event)" (keydown)="onKeyDown($event)" tabindex="0">

            <div class="slider-wrapper">
                <div class="slide" [class.active]="getSlideClass(i) === 'active'"
                    [class.prev]="getSlideClass(i) === 'prev'" [class.next]="getSlideClass(i) === 'next'"
                    [class.far-prev]="getSlideClass(i) === 'far-prev'"
                    [class.far-next]="getSlideClass(i) === 'far-next'" [class.hidden]="getSlideClass(i) === 'hidden'"
                    *ngFor="let testimonial of testimonials; let i = index; trackBy: trackByTestimonial"
                    (click)="goToSlide(i)">

                    <div class="testimonialbox">
                        <img src="https://i.ibb.co/ZcNh6FY/download.png" alt="quoteicon" class="quote">

                        <div class="content">
                            <p>{{ testimonial.text }}</p>

                            <div class="details">
                                <div class="imgBx">
                                    <img [src]="testimonial.avatar" [alt]="testimonial.name" />
                                </div>
                                <h3>
                                    {{ testimonial.name }}
                                    <!-- <strong>{{ testimonial.location }}</strong> -->
                                </h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="japan-experience-section">
    <!-- Video Background -->
    <video class="japan-video" autoplay muted loop playsinline preload="metadata">
        <source src="assets/videos/JapanVideo.mp4" type="video/mp4">
        <!-- Fallback for browsers that don't support video -->
        Your browser does not support the video tag.
    </video>

    <!-- Overlay -->
    <div class="japan-overlay"></div>

    <!-- Decorative Elements -->
    <div class="japan-decoration japan-decoration-1"></div>
    <div class="japan-decoration japan-decoration-2"></div>
    <div class="japan-decoration japan-decoration-3"></div>

    <!-- Japan Content -->
    <div class="japan-content">
        <h2 class="japan-title">
            Experience Japan
        </h2>
        <p class="japan-subtitle">
            Come with Us on a 8 Days Trip of a Lifetime
        </p>
        <span class="visually-hidden">"See More about Japan Tour - 8 Days Trip</span>
        <a href="/japantour" class="japan-cta" aria-label="See More about Japan Tour - 8 Days Trip">
            See More
        </a>

    </div>
</section>

<!-- Time Picker Modal -->
<div class="time-picker-overlay" [class.active]="timePickerVisible" (click)="closeTimePicker()">
    <div class="time-picker-modal" (click)="$event.stopPropagation()">
        <div class="time-picker-header">
            <h3>Select Pick Up Time</h3>
            <button class="close-btn" (click)="closeTimePicker()" aria-label="Close time picker">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="time-picker-content">
            <div class="time-columns">
                <!-- Hours Column -->
                <div class="time-column">
                    <div class="column-header">Hrs</div>
                    <div class="time-scroll-container">
                        <div class="time-options" #hoursContainer>
                            <div class="time-option" *ngFor="let hour of hours" [class.selected]="selectedHour === hour"
                                (click)="selectHour(hour)">
                                {{hour}}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Minutes Column -->
                <div class="time-column">
                    <div class="column-header">Min</div>
                    <div class="time-scroll-container">
                        <div class="time-options">
                            <div class="time-option" *ngFor="let minute of minutes"
                                [class.selected]="selectedMinute === minute" (click)="selectMinute(minute)">
                                {{minute}}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AM/PM Column -->
                <div class="time-column">
                    <div class="column-header">A.M/ P.M</div>
                    <div class="time-scroll-container">
                        <div class="time-options">
                            <div class="time-option" [class.selected]="selectedPeriod === 'AM'"
                                (click)="selectPeriod('AM')">
                                A.M.
                            </div>
                            <div class="time-option" [class.selected]="selectedPeriod === 'PM'"
                                (click)="selectPeriod('PM')">
                                P.M.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="time-picker-footer">
            <button class="done-btn" (click)="confirmTimeSelection()">
                Done
            </button>
        </div>
    </div>
</div>

<!-- Mobile Location Selection Sliding Popup -->
<div class="mobile-location-popup" [class.active]="showMobileLocationPopup" (click)="closeMobileLocationPopup()">
    <div class="mobile-location-popup-content" (click)="$event.stopPropagation()">
        <div class="mobile-location-popup-header">
            <button class="mobile-location-popup-back" (click)="closeMobileLocationPopup()"
                aria-label="Location Popup Back">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h3>{{ mobilePopupType === 'from' ? 'Enter Source City' : mobilePopupType === 'to' ? 'Enter Destination
                City' : mobilePopupType === 'pickup' ? 'Select Pickup Point' : 'Select Drop Point' }}</h3>
            <button class="mobile-location-popup-close" aria-label="Close Location Popup"
                (click)="closeMobileLocationPopup()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="mobile-location-popup-search">
            <i class="fas fa-search"></i>
            <input type="text" class="mobile-location-search-input" [value]="mobileSearchQuery"
                (input)="onMobileLocationInput($any($event.target).value)"
                [placeholder]="mobilePopupType === 'from' ? 'Enter Source City' : mobilePopupType === 'to' ? 'Enter Destination City' : mobilePopupType === 'pickup' ? 'Enter pickup location' : 'Enter drop location'">
        </div>

        <!-- Tabs for Popular Searches and See All (only for from/to cities, NOT for flights) -->
        <div class="mobile-location-popup-tabs"
            *ngIf="isMobileCityArray() && !mobileSearchQuery && !isFlightPopup() && mobileTab !== 'reserved'">
            <button class="mobile-location-tab" [class.active]="mobileLocationTab === 'popular'"
                (click)="setMobileLocationTab('popular')">
                Popular Searches
            </button>
            <button class="mobile-location-tab" [class.active]="mobileLocationTab === 'seeall'"
                (click)="setMobileLocationTab('seeall')">
                See All
            </button>
        </div>

        <div class="mobile-location-popup-suggestions">
            <!-- Popular Searches Tab - Grouped by State (NOT for flights) -->
            <ng-container
                *ngIf="isMobileCityArray() && mobileLocationTab === 'popular' && !mobileSearchQuery && !isFlightPopup() && mobileTab !== 'reserved'">
                <div *ngFor="let stateGroup of getCitiesGroupedByState()" class="mobile-location-state-group">
                    <div class="mobile-location-state-header">{{ stateGroup.state }}</div>
                    <div class="mobile-location-pills-container">
                        <button *ngFor="let city of getInitialCitiesForState(stateGroup)" class="mobile-location-pill"
                            (click)="selectMobileCity(city.name, city.code)">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>{{ city.name }}</span>
                        </button>
                    </div>
                    <button *ngIf="hasMoreCities(stateGroup)" class="mobile-location-see-more"
                        (click)="toggleStateExpansion(stateGroup.state)">
                        See More..
                    </button>
                    <button *ngIf="stateGroup.expanded && hasNonPopularCities(stateGroup)"
                        class="mobile-location-see-more mobile-location-see-less"
                        (click)="toggleStateExpansion(stateGroup.state)">
                        See Less..
                    </button>
                </div>
            </ng-container>

            <!-- See All Tab - All Cities (NOT for flights) -->
            <ng-container
                *ngIf="isMobileCityArray() && mobileLocationTab === 'seeall' && !mobileSearchQuery && !isFlightPopup() && mobileTab !== 'reserved'">
                <div *ngFor="let city of getAllCitiesForSeeAll()" class="mobile-location-suggestion"
                    (click)="selectMobileCity(city.name, city.code)">
                    <i class="fas fa-map-marker-alt"></i>
                    <div class="mobile-location-suggestion-content">
                        <div class="mobile-location-suggestion-name">{{ city.name }}</div>
                        <div class="mobile-location-suggestion-state">{{ city.state }}</div>
                    </div>
                </div>
            </ng-container>

            <!-- Search Results (when user types) OR for flights (always show search) -->
            <ng-container
                *ngIf="isMobileCityArray() && (mobileSearchQuery || isFlightPopup() || mobileTab === 'reserved')">
                <div *ngFor="let city of getMobileCitySuggestionsList()" class="mobile-location-suggestion"
                    (click)="selectMobileCity(city.name, city.code)">
                    <div class="mobile-location-icon">
                        <i class="fas"
                            [ngClass]="mobileTab === 'flights' ? (mobilePopupType === 'to' ? 'fa-plane-arrival' : 'fa-plane-departure') : 'fa-map-marker-alt'"></i>
                    </div>
                    <div class="mobile-location-suggestion-content">
                        <div class="mobile-location-city-country">{{ city.name }}{{ city.country ? ', ' + city.country :
                            (city.state && mobileTab !== 'reserved' ? ', ' + city.state : '') }}</div>
                        <div class="mobile-location-airport-name" *ngIf="city.airportName">{{ city.airportName }}</div>
                        <div class="mobile-location-airport-name"
                            *ngIf="!city.airportName && city.state && !isFlightPopup() && mobileTab !== 'reserved'">{{
                            city.state }}</div>
                    </div>
                    <div class="mobile-location-airport-code" *ngIf="city.code && mobileTab !== 'reserved'">[ {{
                        city.code }} ]</div>
                </div>
            </ng-container>

            <!-- Location Suggestions (for pickup/drop) -->
            <ng-container *ngIf="!isMobileCityArray()">
                <div *ngFor="let location of getMobileLocationSuggestionsList()" class="mobile-location-suggestion"
                    (click)="selectMobileLocation(location)">
                    <i class="fas fa-map-marker-alt"></i>
                    <div class="mobile-location-suggestion-content">
                        <div class="mobile-location-suggestion-name">{{ location }}</div>
                        <div class="mobile-location-suggestion-state"
                            *ngIf="mobileTab === 'shared' || mobileTab === 'reserved'">
                            {{ mobileTab === 'shared' ? (mobilePopupType === 'pickup' ? selectedCities.shared.pickup :
                            selectedCities.shared.dropoff) : (mobilePopupType === 'pickup' ?
                            selectedCities.reserved.pickup : selectedCities.reserved.dropoff) }}
                        </div>
                    </div>
                </div>
            </ng-container>

            <div *ngIf="getMobilePopupSuggestions().length === 0 && mobileSearchQuery"
                class="mobile-location-no-results">
                <p>No results found</p>
            </div>
        </div>
    </div>
</div>

<!-- Mobile Travelers & Class Selection Popup -->
<div class="mobile-travelers-popup" [class.active]="showMobileTravelersPopup" (click)="closeMobileTravelersPopup()">
    <div class="mobile-travelers-popup-content" (click)="$event.stopPropagation()">
        <div class="mobile-travelers-popup-header">
            <button class="mobile-travelers-popup-back" (click)="closeMobileTravelersPopup()"
                aria-label="Travelers Popup Back">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h3>Travellers & Class</h3>
            <button class="mobile-travelers-popup-close" aria-label="Close Travelers Popup"
                (click)="closeMobileTravelersPopup()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="mobile-travelers-popup-body">
            <div class="mobile-traveler-section">
                <h4>Travellers</h4>

                <div class="mobile-traveler-row">
                    <div class="mobile-traveler-info">
                        <h5>Adults</h5>
                        <p>12 yrs or above</p>
                    </div>
                    <div class="mobile-traveler-counter">
                        <button class="mobile-counter-btn" [disabled]="!canDecrease('adults')"
                            [class.active]="counts.adults > 1" (click)="updateCount('adults', -1)">‚àí</button>
                        <span class="mobile-counter-value">{{ counts.adults }}</span>
                        <button class="mobile-counter-btn" (click)="updateCount('adults', 1)">+</button>
                    </div>
                </div>

                <div class="mobile-traveler-row">
                    <div class="mobile-traveler-info">
                        <h5>Children</h5>
                        <p>2 - 12 yrs</p>
                    </div>
                    <div class="mobile-traveler-counter">
                        <button class="mobile-counter-btn" [disabled]="!canDecrease('children')"
                            [class.active]="counts.children > 0" (click)="updateCount('children', -1)">‚àí</button>
                        <span class="mobile-counter-value">{{ counts.children }}</span>
                        <button class="mobile-counter-btn" (click)="updateCount('children', 1)">+</button>
                    </div>
                </div>

                <div class="mobile-traveler-row">
                    <div class="mobile-traveler-info">
                        <h5>Infants</h5>
                        <p>0 - 2 yrs</p>
                    </div>
                    <div class="mobile-traveler-counter">
                        <button class="mobile-counter-btn" [disabled]="!canDecrease('infants')"
                            [class.active]="counts.infants > 0" (click)="updateCount('infants', -1)">‚àí</button>
                        <span class="mobile-counter-value">{{ counts.infants }}</span>
                        <button class="mobile-counter-btn" (click)="updateCount('infants', 1)">+</button>
                    </div>
                </div>
            </div>

            <div class="mobile-class-section">
                <h4>Travel Class</h4>
                <div class="mobile-class-options">
                    <button class="mobile-class-option" [class.active]="selectedClass === 'economy'"
                        (click)="updateClass('economy')">
                        Economy
                    </button>
                    <button class="mobile-class-option" [class.active]="selectedClass === 'business'"
                        (click)="updateClass('business')">
                        Business
                    </button>
                    <button class="mobile-class-option" [class.active]="selectedClass === 'first'"
                        (click)="updateClass('first')">
                        First
                    </button>
                </div>
            </div>
        </div>

        <div class="mobile-travelers-popup-footer">
            <button class="mobile-travelers-done-btn" (click)="closeMobileTravelersPopup()">Done</button>
        </div>
    </div>
</div>

<!-- Mobile Date Picker Modal -->
<div class="mobile-date-picker-overlay" [class.active]="showMobileDatePicker" (click)="closeMobileDatePicker()">
    <div class="mobile-date-picker-modal" (click)="$event.stopPropagation()">
        <div class="mobile-date-picker-header">
            <button class="mobile-date-picker-back" (click)="closeMobileDatePicker()" aria-label="Date Picker Back">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h3>{{ mobileDatePickerType === 'shared' ? 'Select Date of Travel' : mobileDatePickerType === 'reserved' ?
                'Select Date' : mobileDatePickerType === 'flights-return' ? 'Select Return Date' : (mobileDatePickerType
                && mobileDatePickerType.toString().startsWith('flights-multicity-')) ? 'Select Departure Date' : 'Select
                Departure Date' }}</h3>
            <button class="mobile-date-picker-close" aria-label="Close Date Picker" (click)="closeMobileDatePicker()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="mobile-date-picker-content">
            <div class="mobile-calendar-wrapper">
                <app-custom-calendar *ngIf="mobileDatePickerType === 'shared'" class="shared-cabs-calendar"
                    [selectedDate]="formValues.sharedDateTime" [minDate]="getTodayDate()" [alwaysOpen]="true"
                    placeholder="Select date" (dateSelected)="onMobileDateSelected($event, 'shared')">
                </app-custom-calendar>

                <app-custom-calendar *ngIf="mobileDatePickerType === 'reserved'"
                    [selectedDate]="formValues.reservedDate" class="shared-cabs-calendar" [minDate]="getTodayDate()"
                    [alwaysOpen]="true" placeholder="Select date"
                    (dateSelected)="onMobileDateSelected($event, 'reserved')">
                </app-custom-calendar>

                <app-custom-calendar *ngIf="mobileDatePickerType === 'flights'" class="flights-calendar"
                    [selectedDate]="flightRoutes[0].date || formValues.flightDeparture" [minDate]="getTodayDate()"
                    [calendarFareMap]="calendarFareMap" [alwaysOpen]="true" placeholder="Select date"
                    (dateSelected)="onMobileDateSelected($event, 'flights')">
                </app-custom-calendar>

                <app-custom-calendar *ngIf="mobileDatePickerType === 'flights-return'" class="flights-calendar"
                    [selectedDate]="formValues.flightReturn" [minDate]="getReturnMinDate()"
                    [calendarFareMap]="calendarFareMapReturn" [alwaysOpen]="true" placeholder="Select return date"
                    (dateSelected)="onMobileDateSelected($event, 'flights-return')">
                </app-custom-calendar>

                <app-custom-calendar
                    *ngIf="mobileDatePickerType && mobileDatePickerType.toString().startsWith('flights-multicity-')"
                    [selectedDate]="(flightRoutes[currentMultiCityRouteIndex] && flightRoutes[currentMultiCityRouteIndex].date) ? flightRoutes[currentMultiCityRouteIndex].date : ''"
                    [minDate]="getTodayDate()" class="flights-calendar" [alwaysOpen]="true" placeholder="Select date"
                    (dateSelected)="onMobileDateSelected($event, mobileDatePickerType.toString())">
                </app-custom-calendar>
            </div>
        </div>
    </div>
</div>


<!-- Mobile Country Selection Sliding Popup -->
<div class="mobile-country-popup" [class.active]="showMobileCountryPopup">
    <div class="mobile-country-popup-backdrop" (click)="closeMobileCountryPopup()" aria-hidden="true"></div>
    <div class="mobile-country-popup-content" (click)="$event.stopPropagation()">
        <div class="mobile-country-popup-header">
            <button type="button" class="mobile-country-popup-back" (click)="closeMobileCountryPopup()"
                aria-label="Country Popup Back">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h3>Select Country</h3>
            <button type="button" class="mobile-country-popup-close" aria-label="Close Country Popup"
                (click)="closeMobileCountryPopup()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="mobile-country-popup-search">
            <i class="fas fa-search mobile-country-search-icon" aria-hidden="true"></i>
            <input #mobileCountrySearchInput type="text" class="mobile-country-search-input"
                [(ngModel)]="mobileCountrySearchQuery" placeholder="Search country or code" inputmode="search"
                autocomplete="off">
        </div>

        <div class="mobile-country-popup-suggestions">
            <button type="button" *ngFor="let country of getFilteredCountries()" class="mobile-country-suggestion"
                (click)="selectMobileCountry(country)" (touchend)="onMobileCountrySuggestionTouch($event, country)">
                <div class="mobile-country-icon">
                    <img [src]="'https://flagcdn.com/w40/' + getFlagCode(country.code) + '.png'"
                        style="width: 24px; border-radius: 2px;" [alt]="country.name">
                </div>
                <div class="mobile-country-suggestion-content">
                    <div class="mobile-country-name">{{ country.name }}</div>
                </div>
                <div class="mobile-country-code">{{ country.code }}</div>
            </button>
        </div>
    </div>
</div>

<!-- Custom Phone Number Keypad (Mobile Only) -->
<app-phone-dialer [isVisible]="showCustomKeypad && isMobileView()" [currentValue]="phoneNumber" [maxLength]="10"
    (numberClick)="onKeypadNumberClick($event)" (backspaceClick)="onKeypadBackspace()" (doneClick)="onKeypadDone()"
    (closeDialer)="closeCustomKeypad()">
</app-phone-dialer>