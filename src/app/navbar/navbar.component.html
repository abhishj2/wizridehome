<!-- Main Navbar -->
<nav class="navbar">
  <!-- Mobile Header Wrapper (only visible on mobile) -->
  <div class="mobile-header-wrapper">
    <div class="mobile-header-inner">
      <button 
        class="mobile-menu-btn"
        (click)="toggleMobileMenu()"
        [class.active]="isMobileMenuOpen">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
      <div class="mobile-logo">
        <a href="/"><img src="https://wizzride.com/assets/images/icons/logo2.webp" alt="WizzRide"></a>
      </div>
      
      <div></div>
      <div></div>
    </div>
  </div>

  <div class="navbar-container">
    <!-- Logo Section -->
    <div class="logo-section">
      <a href="/"><img src="https://wizzride.com/assets/images/icons/logo2.webp" alt="WizzRide" class="logo-image"></a>
    </div>

    <!-- Navigation Links (Desktop) -->
    <div class="nav-links desktop-nav">
      <div 
        *ngFor="let item of navigationItems" 
        class="nav-item"
        [class.has-dropdown]="item.hasDropdown"
        (mouseenter)="item.hasDropdown ? toggleDropdown(item.name) : null"
        (mouseleave)="item.hasDropdown ? closeDropdown() : null">
        
        <a 
          [href]="item.link || '#'" 
          class="nav-link"
          (click)="handleDesktopClick(item, $event)">
          {{ item.name }}
          <i *ngIf="item.hasDropdown" class="fas fa-chevron-down dropdown-icon"></i>
        </a>

        <!-- Dropdown Menu -->
        <div 
          *ngIf="item.hasDropdown && activeDropdown === item.name" 
          class="dropdown-menu">
          <a 
            *ngFor="let dropdownItem of item.dropdownItems" 
            [href]="dropdownItem.link" 
            class="dropdown-item">
            {{ dropdownItem.name }}
          </a>
        </div>
      </div>
    </div>

    <!-- Search Icon -->
    <!-- <div class="search-section">
      <button class="search-btn" (click)="toggleSearch()" title="Search">
        <i class="fas fa-search"></i>
      </button>
    </div> -->

    <!-- Information Icon -->
    <div class="info-section">
      <a href="/newsandannouncements" class="info-btn" title="News and Announcements">
        <i class="fas fa-info"></i>
      </a>
    </div>

    <!-- Mobile Menu Toggle -->
    <div class="mobile-menu-toggle">
      <button 
        class="hamburger-btn"
        (click)="toggleMobileMenu()"
        [class.active]="isMobileMenuOpen">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </div>

  <!-- Sliding Search Input -->
  <div class="sliding-search" [class.active]="isSearchOpen">
    <div class="sliding-search-container">
      <div class="search-input-wrapper">
        <i class="fas fa-search search-icon"></i>
        <input 
          type="text" 
          class="sliding-search-input" 
          placeholder="Enter Search"
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()"
          (blur)="onSearchBlur()">
        <button class="search-close-btn" (click)="closeSearch()" title="Close Search">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Navigation Menu -->
  <div class="mobile-nav" [class.active]="isMobileMenuOpen">
    <!-- <div class="mobile-search">
      <div class="search-container">
        <i class="fas fa-search search-icon"></i>
        <input 
          type="text" 
          class="search-input" 
          placeholder="Enter Search"
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()">
      </div>
    </div> -->

    <div class="mobile-nav-items">
      <div 
        *ngFor="let item of navigationItems" 
        class="mobile-nav-item">
        
        <div 
          class="mobile-nav-link"
          (click)="handleMobileClick(item, $event)">
          <a [href]="item.link || '#'" class="nav-link-text">{{ item.name }}</a>
          <i *ngIf="item.hasDropdown" 
             class="fas fa-chevron-down mobile-dropdown-icon"
             [class.rotated]="activeDropdown === item.name"></i>
        </div>

        <!-- Mobile Dropdown -->
        <div 
          *ngIf="item.hasDropdown && activeDropdown === item.name" 
          class="mobile-dropdown">
          <a 
            *ngFor="let dropdownItem of item.dropdownItems" 
            [href]="dropdownItem.link" 
            class="mobile-dropdown-item">
            {{ dropdownItem.name }}
          </a>
        </div>
      </div>
    </div>

    <div class="mobile-info">
      <button class="info-btn" title="Information">
        <i class="fas fa-info"></i>
        <span>Information</span>
      </button>
    </div>
  </div>

  <!-- Mobile Nav Drawer (trial.html style) -->
  <div class="mobile-nav-drawer" [class.open]="isMobileMenuOpen" (click)="closeMobileDrawer($event)">
    <button class="mobile-nav-drawer-close" (click)="toggleMobileMenu()">Ã—</button>
    <div class="mobile-nav-drawer-items">
      <div 
        *ngFor="let item of navigationItems" 
        class="mobile-nav-drawer-item">
        
        <a 
          *ngIf="!item.hasDropdown"
          [href]="item.link || '#'" 
          class="mobile-nav-drawer-link"
          (click)="closeMobileMenuOnClick()">
          {{ item.name }}
        </a>

        <div 
          *ngIf="item.hasDropdown"
          class="mobile-nav-drawer-link"
          (click)="handleMobileDrawerClick(item, $event)">
          {{ item.name }}
        </div>

        <!-- Mobile Drawer Dropdown -->
        <div 
          *ngIf="item.hasDropdown && activeDropdown === item.name" 
          class="mobile-nav-drawer-dropdown">
          <a 
            *ngFor="let dropdownItem of item.dropdownItems" 
            [href]="dropdownItem.link" 
            class="mobile-nav-drawer-dropdown-item"
            (click)="closeMobileMenuOnClick()">
            {{ dropdownItem.name }}
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>
